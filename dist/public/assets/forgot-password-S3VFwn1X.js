import{b as e,j as s}from"./vendor-query-CoA2KGsa.js";import{r}from"./vendor-react-Bg7tF2Ta.js";import{u as t,o as a,s as i}from"./vendor-form-DFvvgXD3.js";import{F as l,a as o,b as n,c,d,e as m,t as h}from"./zod-DGgt3RV_.js";import{L as x}from"./vendor-router-CuiUI5dJ.js";import{a as u,C as j,q as w,r as b,J as f,s as g,B as p,I as v}from"./index-BM-Jcr-U.js";import{A as N,a as y}from"./alert-D32rFA5X.js";import{c as E,l as k,K as S,X as C}from"./vendor-icons-owZ3yLAb.js";import"./vendor-ui-BRIy5LFq.js";import"./vendor-utils-CrFdsnXa.js";const P=a({email:i().email("Please enter a valid email address")});function q(){const[a,i]=r.useState(!1),{toast:q}=u(),A=t({resolver:h(P),defaultValues:{email:""}}),B=e({mutationFn:async e=>{const s=await fetch("/api/auth/forgot-password",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(e)});if(!s.ok){const e=await s.json();if(404===s.status)throw new Error(e.error+"\n\n"+e.message);if(429===s.status)throw new Error("Too many reset attempts. Please wait 15 minutes before trying again.");throw new Error(e.error||"Failed to send reset email")}return s.json()},onSuccess:()=>{i(!0),q({title:"Reset email sent",description:"Check your email for password reset instructions."})},onError:e=>{q({title:"Error",description:e.message,variant:"destructive"})}});return a?s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-slate-900 via-blue-900 to-slate-900 p-4",children:s.jsxs(j,{className:"w-full max-w-md bg-white/10 backdrop-blur-md border-white/20",children:[s.jsxs(w,{className:"text-center",children:[s.jsx("div",{className:"mx-auto w-16 h-16 bg-green-500/20 rounded-full flex items-center justify-center mb-4",children:s.jsx(E,{className:"w-8 h-8 text-green-400"})}),s.jsx(b,{className:"text-2xl font-bold text-white",children:"Check Your Email"}),s.jsx(f,{className:"text-gray-300",children:"We've sent password reset instructions to your email address."})]}),s.jsxs(g,{className:"text-center space-y-4",children:[s.jsx("div",{className:"text-gray-300 text-sm",children:s.jsx("p",{children:"Didn't receive the email? Check your spam folder or try again."})}),s.jsxs("div",{className:"flex flex-col gap-3",children:[s.jsxs(p,{variant:"outline",onClick:()=>i(!1),className:"w-full bg-white/10 hover:bg-white/20 text-white border-white/30",children:[s.jsx(k,{className:"w-4 h-4 mr-2"}),"Send Another Email"]}),s.jsx(x,{href:"/login",children:s.jsxs(p,{variant:"ghost",className:"w-full text-gray-300 hover:text-white hover:bg-white/10",children:[s.jsx(S,{className:"w-4 h-4 mr-2"}),"Back to Login"]})})]})]})]})}):s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-slate-900 via-blue-900 to-slate-900 p-4",children:s.jsxs(j,{className:"w-full max-w-md bg-white/10 backdrop-blur-md border-white/20",children:[s.jsxs(w,{className:"text-center",children:[s.jsx(b,{className:"text-2xl font-bold text-white",children:"Reset Password"}),s.jsx(f,{className:"text-gray-300",children:"Enter your email address and we'll send you a link to reset your password."})]}),s.jsxs(g,{children:[s.jsx(l,{...A,children:s.jsxs("form",{onSubmit:A.handleSubmit(e=>{B.mutate(e)}),className:"space-y-4",children:[s.jsx(o,{control:A.control,name:"email",render:({field:e})=>s.jsxs(n,{children:[s.jsx(c,{className:"text-white",children:"Email Address"}),s.jsx(d,{children:s.jsxs("div",{className:"relative",children:[s.jsx(v,{type:"email",placeholder:"Enter your email address",className:"bg-white/10 border-white/30 text-white placeholder-gray-400 focus:border-blue-400 pr-10",...e}),e.value&&s.jsx("button",{type:"button",onClick:()=>{e.onChange(""),A.clearErrors("email")},className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-white transition-colors",tabIndex:-1,children:s.jsx(C,{className:"h-4 w-4"})})]})}),s.jsx(m,{className:"text-red-400"})]})}),B.error&&s.jsx(N,{className:"bg-red-500/20 border-red-500/30",children:s.jsx(y,{className:"text-red-300 whitespace-pre-line",children:B.error.message})}),s.jsx(p,{type:"submit",disabled:B.isPending,className:"w-full bg-blue-600 hover:bg-blue-700 text-white",children:B.isPending?"Sending...":"Send Reset Email"})]})}),s.jsx("div",{className:"mt-6 text-center",children:s.jsx(x,{href:"/login",children:s.jsxs(p,{variant:"ghost",className:"text-gray-300 hover:text-white hover:bg-white/10",children:[s.jsx(S,{className:"w-4 h-4 mr-2"}),"Back to Login"]})})})]})]})})}export{q as default};
