import{r as e,R as t}from"./vendor-react-Bg7tF2Ta.js";var n={exports:{}},r={},s=e;var o="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},a=s.useState,c=s.useEffect,i=s.useLayoutEffect,u=s.useDebugValue;function l(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!o(e,n)}catch(r){return!0}}var f="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(e,t){return t()}:function(e,t){var n=t(),r=a({inst:{value:n,getSnapshot:t}}),s=r[0].inst,o=r[1];return i(function(){s.value=n,s.getSnapshot=t,l(s)&&o({inst:s})},[e,n,t]),c(function(){return l(s)&&o({inst:s}),e(function(){l(s)&&o({inst:s})})},[e]),u(n),n};r.useSyncExternalStore=void 0!==s.useSyncExternalStore?s.useSyncExternalStore:f,n.exports=r;var h=n.exports;const d=t.useInsertionEffect,p=!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement)?e.useLayoutEffect:e.useEffect,v=d||p,y=t=>{const n=e.useRef([t,(...e)=>n[0](...e)]).current;return v(()=>{n[0]=t}),n[1]},m="pushState",E="replaceState",w=["popstate",m,E,"hashchange"],b=e=>{for(const t of w)addEventListener(t,e);return()=>{for(const t of w)removeEventListener(t,e)}},x=(e,t)=>h.useSyncExternalStore(b,e,t),S=()=>location.search,g=()=>location.pathname,k=({ssrPath:e}={})=>x(g,e?()=>e:g),C=(e,{replace:t=!1,state:n=null}={})=>history[t?E:m](n,"",e),O=Symbol.for("wouter_v3");if("undefined"!=typeof history&&void 0===window[O]){for(const e of[m,E]){const t=history[e];history[e]=function(){const n=t.apply(this,arguments),r=new Event(e);return r.arguments=arguments,dispatchEvent(r),n}}Object.defineProperty(window,O,{value:!0})}const R=(e="")=>"/"===e?"":e,j=(e="",t)=>((e,t)=>t.toLowerCase().indexOf(e.toLowerCase())?"~"+t:t.slice(e.length)||"/")(P(R(e)),P(t)),P=e=>{try{return decodeURI(e)}catch(t){return e}},L={hook:(e={})=>[k(e),C],searchHook:({ssrSearch:e=""}={})=>x(S,()=>e),parser:function(e,t){if(e instanceof RegExp)return{keys:!1,pattern:e};var n,r,s,o,a=[],c="",i=e.split("/");for(i[0]||i.shift();s=i.shift();)"*"===(n=s[0])?(a.push(n),c+="?"===s[1]?"(?:/(.*))?":"/(.*)"):":"===n?(r=s.indexOf("?",1),o=s.indexOf(".",1),a.push(s.substring(1,~r?r:~o?o:s.length)),c+=~r&&!~o?"(?:/([^/]+?))?":"/([^/]+?)",~o&&(c+=(~r?"?":"")+"\\"+s.substring(o))):c+="/"+s;return{keys:a,pattern:new RegExp("^"+c+(t?"(?=$|/)":"/?$"),"i")}},base:"",ssrPath:void 0,ssrSearch:void 0,ssrContext:void 0,hrefs:e=>e},K=e.createContext(L),V=()=>e.useContext(K),A={},D=e.createContext(A),I=()=>e.useContext(D),N=e=>{const[t,n]=e.hook(e);return[j(e.base,t),y((t,r)=>n(((e,t)=>"~"===e[0]?e.slice(1):R(t)+e)(t,e.base),r))]},$=()=>N(V()),F=(e,t,n,r)=>{const{pattern:s,keys:o}=t instanceof RegExp?{keys:!1,pattern:t}:e(t||"*",r),a=s.exec(n)||[],[c,...i]=a;return void 0!==c?[!0,(()=>{const e=!1!==o?Object.fromEntries(o.map((e,t)=>[e,i[t]])):a.groups;let t={...i};return e&&Object.assign(t,e),t})(),...r?[c]:[]]:[!1,null]},H=e=>F(V().parser,e,$()[0]),M=({children:t,...n})=>{const r=V(),s=n.hook?L:r;let o=s;const[a,c]=n.ssrPath?.split("?")??[];c&&(n.ssrSearch=c,n.ssrPath=a),n.hrefs=n.hrefs??n.hook?.hrefs;let i=e.useRef({}),u=i.current,l=u;for(let e in s){const t="base"===e?s[e]+(n[e]||""):n[e]||s[e];u===l&&t!==l[e]&&(i.current=l={...l}),l[e]=t,t===s[e]&&t===o[e]||(o=l)}return e.createElement(K.Provider,{value:o,children:t})},U=({children:t,component:n},r)=>n?e.createElement(n,{params:r}):"function"==typeof t?t(r):t,_=({path:t,nest:n,match:r,...s})=>{const o=V(),[a]=N(o),[c,i,u]=r??F(o.parser,t,a,n),l=(t=>{let n=e.useRef(A);const r=n.current;return n.current=Object.keys(t).length!==Object.keys(r).length||Object.entries(t).some(([e,t])=>t!==r[e])?t:r})({...I(),...i});if(!c)return null;const f=u?e.createElement(M,{base:u},U(s,l)):U(s,l);return e.createElement(D.Provider,{value:l,children:f})},q=e.forwardRef((t,n)=>{const r=V(),[s,o]=N(r),{to:a="",href:c=a,onClick:i,asChild:u,children:l,className:f,replace:h,state:d,...p}=t,v=y(e=>{e.ctrlKey||e.metaKey||e.altKey||e.shiftKey||0!==e.button||(i?.(e),e.defaultPrevented||(e.preventDefault(),o(c,t)))}),m=r.hrefs("~"===c[0]?c.slice(1):r.base+c,r);return u&&e.isValidElement(l)?e.cloneElement(l,{onClick:v,href:m}):e.createElement("a",{...p,onClick:v,href:m,className:f?.call?f(s===c):f,children:l,ref:n})}),z=t=>Array.isArray(t)?t.flatMap(t=>z(t&&t.type===e.Fragment?t.props.children:t)):[t],B=({children:t,location:n})=>{const r=V(),[s]=N(r);for(const o of z(t)){let t=0;if(e.isValidElement(o)&&(t=F(r.parser,o.props.path,n||s,o.props.nest))[0])return e.cloneElement(o,{match:t})}return null};export{q as L,_ as R,B as S,I as a,H as b,$ as u};
