Here's a prompt for Replit:

URGENT: Product Updates Not Syncing - Fix Live Data Refresh

Issue: I deleted an image in the product manager, but the /products page still shows the old image. Product edits are NOT reflecting on the public site.

Fix Required: Make the /products page refetch data immediately after ANY product edit. Currently there's no synchronization between admin updates and the public view.

Implement these solutions:

Add a refetch trigger after successful updates:
javascript
// In product update handler
const updateProduct = async (productData) => {
  const response = await fetch(`/api/admin/products/${id}`, { method: 'PUT', ... });
  if (response.ok) {
    // Trigger refetch on ALL product queries
    queryClient.invalidateQueries(['products']);
    queryClient.invalidateQueries(['product', id]);
  }
};
Disable caching on products API:
javascript
// Products API endpoint
export async function GET() {
  return NextResponse.json(products, {
    headers: {
      'Cache-Control': 'no-cache, no-store, must-revalidate',
      'Pragma': 'no-cache',
      'Expires': '0'
    }
  });
}
Force fresh data on products page:
javascript
// Products page component
const { data: products, refetch } = useQuery({
  queryKey: ['products'],
  queryFn: fetchProducts,
  staleTime: 0, // Always fetch fresh
  cacheTime: 0, // Don't cache
  refetchOnMount: 'always',
  refetchOnWindowFocus: true
});
Add a global event system:
javascript
// When product is updated in admin
window.dispatchEvent(new CustomEvent('productUpdated', { detail: { productId } }));

// Listen on products page
useEffect(() => {
  const handleUpdate = () => refetch();
  window.addEventListener('productUpdated', handleUpdate);
  return () => window.removeEventListener('productUpdated', handleUpdate);
}, [refetch]);
Bottom line: When I edit/delete ANYTHING in product manager, the /products page must show the changes IMMEDIATELY without manual refresh. This is critical for inventory accuracy.

Test: Edit a product → Check /products → Changes visible instantly ✓

Fix this NOW - customers are seeing outdated inventory!
