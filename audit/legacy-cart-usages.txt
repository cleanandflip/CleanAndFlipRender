COMPREHENSIVE_CART_FIX_STATUS.md:15:   [INFO] POST /api/cart/items 201 189ms
replit.md:22:- **Legacy file purge**: Removed 20 unused files including deprecated server/routes/cart.ts (fully migrated to cart.v2)
CART_SESSION_FIX_COMPLETE.md:39:- Cart additions: POST /api/cart/items → 201 responses
COMPLETE_CODEBASE_AUDIT.md:27:1. **server/routes/cart.ts** - Legacy cart API (replaced with cart.v2)
ULTIMATE_COMPREHENSIVE_CODEBASE_DOCUMENTATION.md:2735:// Location: client/src/hooks/use-cart.tsx + server/routes/cart.ts
UNIFIED_LOCAL_DELIVERY_SYSTEM.md:182:curl -X POST "http://localhost:5000/api/cart/items" -d '{"productId":"...", "quantity":1}'
attached_assets/Pasted-the-repo-is-still-mixing-legacy-cart-and-V2-cart-paths-and-data-shapes-which-is-why-you-re-seeing--1755282076937_1755282076937.txt:3:kills the legacy /api/cart/items flow,
attached_assets/Pasted-the-repo-is-still-mixing-legacy-cart-and-V2-cart-paths-and-data-shapes-which-is-why-you-re-seeing--1755282076937_1755282076937.txt:20:# 1) Kill legacy routes & any mounts of /api/cart/items
attached_assets/Pasted-the-repo-is-still-mixing-legacy-cart-and-V2-cart-paths-and-data-shapes-which-is-why-you-re-seeing--1755282076937_1755282076937.txt:21:rg -n --no-heading -g '!node_modules' -e "/api/cart/items" -e "server/routes/cart\\.ts" > audit/legacy-cart-usages.txt
attached_assets/Pasted-the-repo-is-still-mixing-legacy-cart-and-V2-cart-paths-and-data-shapes-which-is-why-you-re-seeing--1755282076937_1755282076937.txt:23:#  - Delete server/routes/cart.ts
attached_assets/Pasted-the-repo-is-still-mixing-legacy-cart-and-V2-cart-paths-and-data-shapes-which-is-why-you-re-seeing--1755282076937_1755282076937.txt:25:#  - Replace any handler that calls /api/cart/items with V2 (/api/cart) equivalents
attached_assets/Pasted-the-repo-is-still-mixing-legacy-cart-and-V2-cart-paths-and-data-shapes-which-is-why-you-re-seeing--1755282076937_1755282076937.txt:206:# Find any reference to /api/cart/items and remove:
attached_assets/Pasted-the-repo-is-still-mixing-legacy-cart-and-V2-cart-paths-and-data-shapes-which-is-why-you-re-seeing--1755282076937_1755282076937.txt:207:rg -n --no-heading -g '!node_modules' "/api/cart/items" > audit/client-legacy-items.txt
attached_assets/Pasted-the-repo-is-still-mixing-legacy-cart-and-V2-cart-paths-and-data-shapes-which-is-why-you-re-seeing--1755282076937_1755282076937.txt:246:git commit -m "fix(cart): remove legacy /api/cart/items; enforce cart.v2 with qty; single hook; Drizzle explicit selects; cleanup only when BLOCKED"
attached_assets/Pasted-the-repo-is-still-mixing-legacy-cart-and-V2-cart-paths-and-data-shapes-which-is-why-you-re-seeing--1755282076937_1755282076937.txt:250:You had two different shapes in play: legacy used quantity + /api/cart/items; V2 uses qty + /api/cart. That mismatch silently created duplicate rows and empty reads.
attached_assets/Pasted-One-time-do-not-stop-fix-plan-You-will-implement-a-SIMPLE-RELIABLE-cart-session-design-and-remove--1755281524916_1755281524917.txt:9:- V2 endpoints only. Legacy /api/cart/items is removed or 410.
attached_assets/Pasted-One-time-do-not-stop-fix-plan-You-will-implement-a-SIMPLE-RELIABLE-cart-session-design-and-remove--1755281524916_1755281524917.txt:293:**Kill legacy POST /api/cart/items**:
attached_assets/Pasted-One-time-do-not-stop-fix-plan-You-will-implement-a-SIMPLE-RELIABLE-cart-session-design-and-remove--1755281524916_1755281524917.txt:294:- Remove any router that mounts `/api/cart/items`.
attached_assets/Pasted-One-time-do-not-stop-fix-plan-You-will-implement-a-SIMPLE-RELIABLE-cart-session-design-and-remove--1755281524916_1755281524917.txt:344:rm -f server/routes/cart.ts \
attached_assets/Pasted-One-time-do-not-stop-fix-plan-You-will-implement-a-SIMPLE-RELIABLE-cart-session-design-and-remove--1755281524916_1755281524917.txt:394:Legacy adds: /api/cart/items caused mismatched behavior. We remove it and use V2 /api/cart only.
attached_assets/Pasted-One-time-do-not-stop-fix-plan-You-will-implement-a-SIMPLE-RELIABLE-cart-session-design-and-remove--1755281524916_1755281524917.txt:402:Run the verification curl. If anything fails, check audit/custom-sid-usages.txt and audit/owner-usages.txt for leftovers, and make sure the client isn’t calling /api/cart/items anywhere.
attached_assets/Pasted-Below-is-a-do-not-stop-end-to-end-replacement-plan-you-can-paste-into-Replit-that-fixes-sessions-c-1755280545676_1755280545677.txt:201:Keep legacy DELETE by item id only for back-compat (owner scoped). Remove legacy POST `/api/cart/items` once client uses V2.
attached_assets/Pasted-Below-is-a-do-not-stop-end-to-end-replacement-plan-you-can-paste-into-Replit-that-fixes-sessions-c-1755280545676_1755280545677.txt:306:Ensure AddToCartButton calls `addMutation.mutateAsync({ productId, qty, variantId })` and **not** the legacy `/api/cart/items` or “quantity” payload.
attached_assets/Pasted-Below-is-a-do-not-stop-end-to-end-replacement-plan-you-can-paste-into-Replit-that-fixes-sessions-c-1755280545676_1755280545677.txt:377:   rm -f server/routes/cart.ts server/lib/locality server/lib/localityChecker server/locality/getLocalityForRequest client/src/hooks/use-cart.tsx src/lib/locality.ts || true
attached_assets/Pasted-Replit-run-sequentially-You-will-execute-a-one-by-one-duplicate-detection-merge-and-purge-across-1755277560992_1755277560992.txt:52:    { "source": "server/routes/cart.ts",               "target": "server/routes/cart.v2.ts",              "reason": "legacy cart route" },
attached_assets/Pasted-Replit-run-sequentially-You-will-execute-a-one-by-one-duplicate-detection-merge-and-purge-across-1755277560992_1755277560992.txt:296:node -e "['server/routes/cart.ts','server/lib/locality','server/lib/localityChecker','server/locality/getLocalityForRequest','client/src/hooks/use-cart.tsx','src/lib/locality.ts','src/utils/distance.ts','src/lib/cartKeys.ts'].forEach(p=>{try{require('fs').rmSync(p,{force:true,recursive:true});console.log('Deleted',p)}catch{}})"
attached_assets/Pasted-Replit-run-sequentially-You-will-execute-a-one-by-one-duplicate-detection-merge-and-purge-across-1755277560992_1755277560992.txt:347:Known duplicate pairs processed first (e.g., server/routes/cart.ts → server/routes/cart.v2.ts; server/services/locality.ts → server/services/localityService.ts; client/src/lib/locality.ts and src/lib/locality.ts → shared/locality.ts; src/utils/distance.ts → shared/geo.ts; src/lib/cartKeys.ts → client/src/lib/cartKeys.ts), based on your inventory. 
attached_assets/Pasted-Replit-run-sequentially-You-will-execute-a-one-by-one-duplicate-detection-merge-and-purge-across-1755277229600_1755277229600.txt:52:    { "source": "server/routes/cart.ts",               "target": "server/routes/cart.v2.ts",              "reason": "legacy cart route" },
attached_assets/Pasted-Replit-run-sequentially-You-will-execute-a-one-by-one-duplicate-detection-merge-and-purge-across-1755277229600_1755277229600.txt:296:node -e "['server/routes/cart.ts','server/lib/locality','server/lib/localityChecker','server/locality/getLocalityForRequest','client/src/hooks/use-cart.tsx','src/lib/locality.ts','src/utils/distance.ts','src/lib/cartKeys.ts'].forEach(p=>{try{require('fs').rmSync(p,{force:true,recursive:true});console.log('Deleted',p)}catch{}})"
attached_assets/Pasted-Replit-run-sequentially-You-will-execute-a-one-by-one-duplicate-detection-merge-and-purge-across-1755277229600_1755277229600.txt:347:Known duplicate pairs processed first (e.g., server/routes/cart.ts → server/routes/cart.v2.ts; server/services/locality.ts → server/services/localityService.ts; client/src/lib/locality.ts and src/lib/locality.ts → shared/locality.ts; src/utils/distance.ts → shared/geo.ts; src/lib/cartKeys.ts → client/src/lib/cartKeys.ts), based on your inventory. 
attached_assets/Pasted-Replit-run-sequentially-You-will-execute-a-full-codebase-review-de-duplication-consolidation-an-1755276398726_1755276398726.txt:83:    "server/routes/cart.ts",
attached_assets/Pasted-Replit-run-sequentially-You-will-execute-a-full-codebase-review-de-duplication-consolidation-an-1755276398726_1755276398726.txt:380:   rg -n --no-heading -g '!node_modules' "server/routes/cart.ts|server/lib/locality|client/src/hooks/use-cart|/api/cart(?!\\.v2)" > audit/stragglers.txt
attached_assets/Pasted-Replit-run-sequentially-You-will-execute-a-full-codebase-review-de-duplication-consolidation-an-1755276398726_1755276398726.txt:551:    "server/routes/cart.ts",
attached_assets/Pasted-Replit-run-sequentially-You-will-execute-a-full-codebase-review-de-duplication-consolidation-an-1755276398726_1755276398726.txt:722:   - DELETE /api/cart/items/:id -> back-compat, owner-scoped
attached_assets/Pasted-Replit-run-sequentially-You-will-execute-a-full-codebase-review-de-duplication-consolidation-an-1755276398726_1755276398726.txt:874:3) rg -n --no-heading -g '!node_modules' "server/routes/cart.ts|server/lib/locality|client/src/hooks/use-cart|/api/cart(?!\\.v2)" > audit/stragglers.txt
attached_assets/Pasted-Tell-Replit-to-apply-these-steps-exactly-You-will-permanently-fix-session-cart-ownership-so-a-single-1755274218557_1755274218557.txt:189:# curl -i -c /tmp/c.sess -b /tmp/c.sess -X DELETE http://localhost:5000/api/cart/items/ITEM_ID
attached_assets/Pasted--rest-express-1-0-0-dev-NODE-ENV-development-tsx-server-index-ts-DB-Environment-detected-via--1755273802469_1755273802469.txt:378:  url: '/api/cart/items',
attached_assets/Pasted--rest-express-1-0-0-dev-NODE-ENV-development-tsx-server-index-ts-DB-Environment-detected-via--1755273802469_1755273802469.txt:392:[WARN] API POST /api/cart/items 500 322ms {
attached_assets/Pasted--rest-express-1-0-0-dev-NODE-ENV-development-tsx-server-index-ts-DB-Environment-detected-via--1755273802469_1755273802469.txt:394:  url: '/api/cart/items',
attached_assets/Pasted--rest-express-1-0-0-dev-NODE-ENV-development-tsx-server-index-ts-DB-Environment-detected-via--1755273802469_1755273802469.txt:402:[ERROR] POST /api/cart/items 500 322ms {
attached_assets/Pasted--rest-express-1-0-0-dev-NODE-ENV-development-tsx-server-index-ts-DB-Environment-detected-via--1755273802469_1755273802469.txt:404:  url: '/api/cart/items',
attached_assets/Pasted--rest-express-1-0-0-dev-NODE-ENV-development-tsx-server-index-ts-DB-Environment-detected-via--1755273802469_1755273802469.txt:412:4:03:02 PM POST    /api/cart/items                          500 323ms
attached_assets/Pasted--method-POST-url-api-track-activity-userAgent-Mozilla-5-0-Windows-NT-10-0-Win64-x-1755273699894_1755273699894.txt:214:  url: '/api/cart/items',
attached_assets/Pasted--method-POST-url-api-track-activity-userAgent-Mozilla-5-0-Windows-NT-10-0-Win64-x-1755273699894_1755273699894.txt:226:[WARN] API POST /api/cart/items 500 278ms {
attached_assets/Pasted--method-POST-url-api-track-activity-userAgent-Mozilla-5-0-Windows-NT-10-0-Win64-x-1755273699894_1755273699894.txt:228:  url: '/api/cart/items',
attached_assets/Pasted--method-POST-url-api-track-activity-userAgent-Mozilla-5-0-Windows-NT-10-0-Win64-x-1755273699894_1755273699894.txt:236:[ERROR] POST /api/cart/items 500 279ms {
attached_assets/Pasted--method-POST-url-api-track-activity-userAgent-Mozilla-5-0-Windows-NT-10-0-Win64-x-1755273699894_1755273699894.txt:238:  url: '/api/cart/items',
attached_assets/Pasted--method-POST-url-api-track-activity-userAgent-Mozilla-5-0-Windows-NT-10-0-Win64-x-1755273699894_1755273699894.txt:246:4:01:09 PM POST    /api/cart/items                          500 280ms
attached_assets/Pasted-You-will-fix-cart-errors-and-harden-cart-logic-Follow-these-steps-exactly-GOALS-1-Fix-Referen-1755273489607_1755273489607.txt:4:1) Fix ReferenceError in DELETE /api/cart/items/:id (use a single cart-owner helper).
attached_assets/Pasted-You-will-fix-cart-errors-and-harden-cart-logic-Follow-these-steps-exactly-GOALS-1-Fix-Referen-1755273489607_1755273489607.txt:7:4) Keep backward-compat for DELETE /api/cart/items/:id but prefer DELETE /api/cart/product/:productId.
attached_assets/Pasted-You-will-fix-cart-errors-and-harden-cart-logic-Follow-these-steps-exactly-GOALS-1-Fix-Referen-1755273489607_1755273489607.txt:167:router.delete("/api/cart/items/:id", async (req, res, next) => {
attached_assets/Pasted-You-will-fix-cart-errors-and-harden-cart-logic-Follow-these-steps-exactly-GOALS-1-Fix-Referen-1755273489607_1755273489607.txt:218:3) Hit DELETE /api/cart/items/:id -> 200 and no ReferenceError.
attached_assets/Pasted-You-will-fix-cart-errors-and-harden-cart-logic-Follow-these-steps-exactly-GOALS-1-Fix-Referen-1755273489607_1755273489607.txt:234:Legacy route /api/cart/items/:id keeps working, while preferred /api/cart/product/:productId prevents ambiguity and matches your consolidation logic.
attached_assets/Pasted-copy-paste-do-not-stop-prompt-for-Replit-that-will-1-audit-the-entire-codebase-for-anything-not-u-1755272364958_1755272364959.txt:222:- server/routes/cart.ts                   (legacy)  -> replace with 410 Gone, then delete once green.
report/jscpd-report.json:31995:          "server/routes/cart.ts": {
attached_assets/Pasted-REPLIT-INSTRUCTIONS-MERGE-HARDEN-PRODUCTS-UI-LIVE-SYNC-Goal-Use-one-WebSocket-hook-useWebSo-1755152289364_1755152289364.txt:202:Edit: cart “add item” route (wherever it lives, e.g. server/routes/cart.ts)
attached_assets/Pasted-Your-PUTs-are-succeeding-200-Stripe-sync-but-the-modal-shows-Save-failed-send-is-not-a-functio-1755151708335_1755151708335.txt:186:File: server/routes/cart.ts (or wherever you handle “add to cart”)
server/routes.ts:900:  app.post("/api/cart/items", authMiddleware.optionalAuth, async (req, res) => {
server/routes.ts:902:      Logger.info(`[CART DEBUG] POST /api/cart/items reached handler - body: ${JSON.stringify(req.body)}, productId: ${req.body?.productId}, quantity: ${req.body?.quantity}`);
server/routes.ts:1025:  app.patch("/api/cart/items/:productId", requireAuth, async (req, res) => {
server/routes.ts:1057:  app.delete("/api/cart/items/:productId", requireAuth, async (req, res) => {
audit/dup-queue.json:4:    "source": "server/routes/cart.ts",
attached_assets/Pasted-Below-is-a-surgical-end-to-end-plan-to-get-your-Locality-Fulfillment-Cart-Checkout-pipeline-t-1755270565928_1755270565929.txt:15:server/routes/cart.ts + client/src/hooks/use-cart.tsx + UI using old hook = inconsistent add/remove behavior, “can’t remove item”, and pre-V2 assumptions.
attached_assets/Pasted-Below-is-a-surgical-end-to-end-plan-to-get-your-Locality-Fulfillment-Cart-Checkout-pipeline-t-1755270565928_1755270565929.txt:95:🛑 HARD-DEPRECATE (delete after rollout) server/routes/cart.ts, client/src/hooks/use-cart.tsx.
attached_assets/Pasted-Below-is-a-surgical-end-to-end-plan-to-get-your-Locality-Fulfillment-Cart-Checkout-pipeline-t-1755270565928_1755270565929.txt:275:Deprecate server/routes/cart.ts by returning 410 Gone + log if hit.
attached_assets/Pasted-Below-is-a-surgical-end-to-end-plan-to-get-your-Locality-Fulfillment-Cart-Checkout-pipeline-t-1755270565928_1755270565929.txt:353:  - In server/routes.ts, change server/routes/cart.ts to return 410 Gone and log a metric if hit.
attached_assets/Pasted-Below-is-a-surgical-end-to-end-plan-to-get-your-Locality-Fulfillment-Cart-Checkout-pipeline-t-1755270565928_1755270565929.txt:374:  - Remove client/src/hooks/use-cart.tsx and server/routes/cart.ts after tests pass.
attached_assets/Pasted-CLEAN-FLIP-LOCALITY-SAFE-CART-UI-GATING-ADD-ONLY-DO-NOT-STOP-UNTIL-ALL-ACCEPTANCE-TESTS-P-1755229714018_1755229714018.txt:72:Keep the legacy DELETE /api/cart/items/:itemId. Do not alter semantics.
attached_assets/Pasted-CLEAN-FLIP-LOCALITY-SAFE-CART-UI-GATING-ADD-ONLY-DO-NOT-STOP-UNTIL-ALL-ACCEPTANCE-TESTS-P-1755229714018_1755229714018.txt:90:POST /api/cart/items (existing): ensure it calls a shared locality checker before mutating.
attached_assets/Pasted-CLEAN-FLIP-LOCALITY-SAFE-CART-UI-GATING-ADD-ONLY-DO-NOT-STOP-UNTIL-ALL-ACCEPTANCE-TESTS-P-1755229714018_1755229714018.txt:309:  http://localhost:5000/api/cart/items
attached_assets/Pasted-CLEAN-FLIP-LOCALITY-SAFE-CART-UI-GATING-ADD-ONLY-DO-NOT-STOP-UNTIL-ALL-ACCEPTANCE-TESTS-P-1755229714018_1755229714018.txt:329:  http://localhost:5000/api/cart/items
audit/ssot-canonical-map.json:18:    { "source": "server/routes/cart.ts",               "target": "server/routes/cart.v2.ts",              "reason": "legacy cart route" },
audit/audit-completion-summary.md:10:- **Legacy cart route**: `server/routes/cart.ts` (replaced with cart.v2)
audit/consolidation-plan-conservative.json:4:      "file": "server/routes/cart.ts",
audit/consolidation-plan.json:4:      "file": "server/routes/cart.ts",
audit/depcheck.json:1:{"dependencies":["@babel/parser","@floating-ui/react","@google-cloud/storage","@jridgewell/trace-mapping","@radix-ui/react-context-menu","@radix-ui/react-dropdown-menu","@radix-ui/react-menubar","@radix-ui/react-navigation-menu","@radix-ui/react-select","@sendgrid/mail","@stripe/react-stripe-js","@stripe/stripe-js","@types/bcrypt","@types/cookie-parser","@types/lodash-es","@types/memoizee","@types/morgan","@types/uuid","@typescript-eslint/eslint-plugin","@typescript-eslint/parser","@uppy/aws-s3","@uppy/core","@uppy/dashboard","@uppy/drag-drop","@uppy/file-input","@uppy/progress-bar","@uppy/react","axios","bcrypt","cmdk","cookie-parser","cosmiconfig","csstree","depcheck","eslint-plugin-import","eslint-plugin-unused-imports","follow-redirects","form-data","gcp-metadata","google-auth-library","google-auto-auth","google-p12-pem","gtoken","jscpd","knip","libphonenumber-js","lodash-es","madge","memoizee","memorystore","micromatch","morgan","next-themes","node-forge","object-hash","openid-client","react-icons","request","source-map-explorer","ts-morph","ts-node","ts-prune","tw-animate-css","uuid","vite-bundle-visualizer","zod-validation-error"],"devDependencies":["@tailwindcss/vite","autoprefixer","postcss"],"missing":{"@shared/schema":["/home/runner/workspace/server/auth.ts","/home/runner/workspace/server/routes.ts","/home/runner/workspace/server/storage.ts","/home/runner/workspace/server/utils/referenceGenerator.ts","/home/runner/workspace/server/scripts/clear-users-dev.ts","/home/runner/workspace/server/routes/admin-metrics.ts","/home/runner/workspace/server/routes/auth-google.ts","/home/runner/workspace/server/middleware/requireLocalCustomer.ts","/home/runner/workspace/server/middleware/transaction.ts","/home/runner/workspace/server/locality/getLocalityForRequest.ts","/home/runner/workspace/server/lib/addressService.ts","/home/runner/workspace/server/lib/profile.ts","/home/runner/workspace/server/config/database.ts","/home/runner/workspace/server/auth/google-strategy.ts","/home/runner/workspace/client/src/pages/auth.tsx","/home/runner/workspace/client/src/pages/dashboard.tsx","/home/runner/workspace/client/src/pages/home.tsx","/home/runner/workspace/client/src/pages/orders.tsx","/home/runner/workspace/client/src/pages/product-detail.tsx","/home/runner/workspace/client/src/pages/sell-to-us.tsx","/home/runner/workspace/client/src/pages/admin/CategoryManager.tsx","/home/runner/workspace/client/src/pages/admin/UserManager.tsx","/home/runner/workspace/client/src/hooks/use-auth.tsx","/home/runner/workspace/client/src/hooks/useProducts.ts","/home/runner/workspace/client/src/contexts/AuthContext.tsx","/home/runner/workspace/client/src/components/products/ProductsResults.tsx","/home/runner/workspace/client/src/components/products/filter-sidebar.tsx","/home/runner/workspace/client/src/components/products/product-card.tsx","/home/runner/workspace/client/src/components/products/product-grid.tsx","/home/runner/workspace/client/src/components/admin/CategoryModal.tsx"],"@shared/utils":["/home/runner/workspace/server/auth.ts","/home/runner/workspace/server/storage.ts"],"@shared/locality":["/home/runner/workspace/server/routes.ts"],"zustand":["/home/runner/workspace/client/src/lib/cartDrawerStore.ts"],"@shared/fulfillment":["/home/runner/workspace/client/src/components/AddToCartButton.tsx","/home/runner/workspace/client/src/components/products/ProductCard.tsx","/home/runner/workspace/client/src/components/locality/ProductAvailabilityChips.tsx","/home/runner/workspace/client/src/components/fulfillment/AddToCartEnhanced.tsx","/home/runner/workspace/client/src/components/admin/modals/EnhancedProductModal.tsx"],"@shared/availability":["/home/runner/workspace/client/src/components/AddToCartButton.tsx","/home/runner/workspace/client/src/components/fulfillment/AddToCartEnhanced.tsx"]},"using":{"drizzle-kit":["/home/runner/workspace/drizzle.config.ts","/home/runner/workspace/package.json"],"esbuild":["/home/runner/workspace/package.json"],"tsx":["/home/runner/workspace/package.json","/home/runner/workspace/tsconfig.json","/home/runner/workspace/vite.config.ts","/home/runner/workspace/server/vite.ts"],"typescript":["/home/runner/workspace/package.json"],"vite":["/home/runner/workspace/package.json","/home/runner/workspace/tsconfig.json","/home/runner/workspace/vite.config.ts","/home/runner/workspace/server/vite.ts"],"terser":["/home/runner/workspace/package.json","/home/runner/workspace/tsconfig.json","/home/runner/workspace/vite.config.ts","/home/runner/workspace/server/vite.ts"],"@types/node":["/home/runner/workspace/package.json","/home/runner/workspace/tsconfig.json","/home/runner/workspace/vite.config.ts","/home/runner/workspace/server/index.ts","/home/runner/workspace/server/routes.ts","/home/runner/workspace/server/storage.ts","/home/runner/workspace/server/vite.ts","/home/runner/workspace/server/websocket.ts","/home/runner/workspace/server/services/simple-password-reset.ts","/home/runner/workspace/server/routes/admin/system-management.ts","/home/runner/workspace/server/middleware/capture.ts","/home/runner/workspace/server/middleware/compression.ts","/home/runner/workspace/server/lib/fingerprint.ts","/home/runner/workspace/server/config/graceful-shutdown.ts","/home/runner/workspace/server/config/security.ts","/home/runner/workspace/server/config/websocket.ts","/home/runner/workspace/server/auth/google-strategy.ts","/home/runner/workspace/scripts/codebase-doctor.ts","/home/runner/workspace/scripts/scan-locality-offenders.ts"],"react":["/home/runner/workspace/package.json","/home/runner/workspace/src/lib/locality.ts","/home/runner/workspace/client/src/App.tsx","/home/runner/workspace/client/src/main.tsx","/home/runner/workspace/client/src/pages/ResetPassword.tsx","/home/runner/workspace/client/src/pages/about.tsx","/home/runner/workspace/client/src/pages/addresses.tsx","/home/runner/workspace/client/src/pages/admin.tsx","/home/runner/workspace/client/src/pages/auth.tsx","/home/runner/workspace/client/src/pages/cart.tsx","/home/runner/workspace/client/src/pages/checkout.tsx","/home/runner/workspace/client/src/pages/contact.tsx","/home/runner/workspace/client/src/pages/dashboard.tsx","/home/runner/workspace/client/src/pages/forgot-password.tsx","/home/runner/workspace/client/src/pages/home.tsx","/home/runner/workspace/client/src/pages/observability.tsx","/home/runner/workspace/client/src/pages/orders.tsx","/home/runner/workspace/client/src/pages/product-detail.tsx","/home/runner/workspace/client/src/pages/products.tsx","/home/runner/workspace/client/src/pages/reset-password.tsx","/home/runner/workspace/client/src/pages/sell-to-us.tsx","/home/runner/workspace/client/src/pages/track-submission.tsx","/home/runner/workspace/client/src/pages/admin/AnalyticsManager.tsx","/home/runner/workspace/client/src/pages/admin/AnalyticsTab.tsx","/home/runner/workspace/client/src/pages/admin/CategoriesTab.tsx","/home/runner/workspace/client/src/pages/admin/CategoryManager.tsx","/home/runner/workspace/client/src/pages/admin/ProductForm.tsx","/home/runner/workspace/client/src/pages/admin/ProductsTab.tsx","/home/runner/workspace/client/src/pages/admin/StripeManager.tsx","/home/runner/workspace/client/src/pages/admin/StripeTab.tsx","/home/runner/workspace/client/src/pages/admin/SubmissionsManager.tsx","/home/runner/workspace/client/src/pages/admin/SubmissionsTab.tsx","/home/runner/workspace/client/src/pages/admin/SystemDashboard.tsx","/home/runner/workspace/client/src/pages/admin/SystemManager.tsx","/home/runner/workspace/client/src/pages/admin/SystemTab.tsx","/home/runner/workspace/client/src/pages/admin/UserManager.tsx","/home/runner/workspace/client/src/pages/admin/UsersTab.tsx","/home/runner/workspace/client/src/lib/protected-route.tsx","/home/runner/workspace/client/src/lib/queryClient.ts","/home/runner/workspace/client/src/hooks/use-addresses.ts","/home/runner/workspace/client/src/hooks/use-auth.tsx","/home/runner/workspace/client/src/hooks/use-live-data.tsx","/home/runner/workspace/client/src/hooks/use-mobile.tsx","/home/runner/workspace/client/src/hooks/use-toast.ts","/home/runner/workspace/client/src/hooks/useBackButton.ts","/home/runner/workspace/client/src/hooks/useCart.ts","/home/runner/workspace/client/src/hooks/useClickOutside.ts","/home/runner/workspace/client/src/hooks/useCloudinaryUpload.tsx","/home/runner/workspace/client/src/hooks/useDebounce.ts","/home/runner/workspace/client/src/hooks/useDefaultAddress.ts","/home/runner/workspace/client/src/hooks/useErrorReporting.ts","/home/runner/workspace/client/src/hooks/useFocusOnArrival.ts","/home/runner/workspace/client/src/hooks/useKeyboardNavigation.ts","/home/runner/workspace/client/src/hooks/useLocalStatus.ts","/home/runner/workspace/client/src/hooks/useLocality.ts","/home/runner/workspace/client/src/hooks/useNavigation.ts","/home/runner/workspace/client/src/hooks/useNavigationState.ts","/home/runner/workspace/client/src/hooks/useProductLiveSync.ts","/home/runner/workspace/client/src/hooks/useProducts.ts","/home/runner/workspace/client/src/hooks/useProductsState.ts","/home/runner/workspace/client/src/hooks/useSafePortal.ts","/home/runner/workspace/client/src/hooks/useScrollLock.tsx","/home/runner/workspace/client/src/hooks/useUnifiedUpload.tsx","/home/runner/workspace/client/src/hooks/useUnsavedChanges.ts","/home/runner/workspace/client/src/hooks/useWebSocketState.tsx","/home/runner/workspace/client/src/contexts/AuthContext.tsx","/home/runner/workspace/client/src/components/AddToCartButton.tsx","/home/runner/workspace/client/src/components/AddToCartButtonUnified.tsx","/home/runner/workspace/client/src/components/Analytics.tsx","/home/runner/workspace/client/src/components/ConfirmDialog.tsx","/home/runner/workspace/client/src/components/ErrorBoundary.tsx","/home/runner/workspace/client/src/components/ImageWithFallback.tsx","/home/runner/workspace/client/src/components/PWAInstaller.tsx","/home/runner/workspace/client/src/components/ProtectedRoute.tsx","/home/runner/workspace/client/src/components/SEOHead.tsx","/home/runner/workspace/client/src/components/error-boundary.tsx","/home/runner/workspace/client/src/components/ui/Dropdown.tsx","/home/runner/workspace/client/src/components/ui/EmptyState.tsx","/home/runner/workspace/client/src/components/ui/FormElements.tsx","/home/runner/workspace/client/src/components/ui/LoadingSpinner.tsx","/home/runner/workspace/client/src/components/ui/LocalDeliveryBadge.tsx","/home/runner/workspace/client/src/components/ui/PortalErrorBoundary.tsx","/home/runner/workspace/client/src/components/ui/ProductPrice.tsx","/home/runner/workspace/client/src/components/ui/QuantitySelector.tsx","/home/runner/workspace/client/src/components/ui/RHFDropdown.tsx","/home/runner/workspace/client/src/components/ui/StockIndicator.tsx","/home/runner/workspace/client/src/components/ui/accordion.tsx","/home/runner/workspace/client/src/components/ui/address-autocomplete.tsx","/home/runner/workspace/client/src/components/ui/address-display.tsx","/home/runner/workspace/client/src/components/ui/alert-dialog.tsx","/home/runner/workspace/client/src/components/ui/alert.tsx","/home/runner/workspace/client/src/components/ui/aspect-ratio.tsx","/home/runner/workspace/client/src/components/ui/avatar.tsx","/home/runner/workspace/client/src/components/ui/badge.tsx","/home/runner/workspace/client/src/components/ui/breadcrumb.tsx","/home/runner/workspace/client/src/components/ui/button.tsx","/home/runner/workspace/client/src/components/ui/calendar.tsx","/home/runner/workspace/client/src/components/ui/card.tsx","/home/runner/workspace/client/src/components/ui/carousel.tsx","/home/runner/workspace/client/src/components/ui/chart.tsx","/home/runner/workspace/client/src/components/ui/checkbox.tsx","/home/runner/workspace/client/src/components/ui/collapsible.tsx","/home/runner/workspace/client/src/components/ui/dialog.tsx","/home/runner/workspace/client/src/components/ui/drawer.tsx","/home/runner/workspace/client/src/components/ui/form.tsx","/home/runner/workspace/client/src/components/ui/hover-card.tsx","/home/runner/workspace/client/src/components/ui/input-otp.tsx","/home/runner/workspace/client/src/components/ui/input.tsx","/home/runner/workspace/client/src/components/ui/label.tsx","/home/runner/workspace/client/src/components/ui/pagination.tsx","/home/runner/workspace/client/src/components/ui/popover.tsx","/home/runner/workspace/client/src/components/ui/price-input.tsx","/home/runner/workspace/client/src/components/ui/progress.tsx","/home/runner/workspace/client/src/components/ui/radio-group.tsx","/home/runner/workspace/client/src/components/ui/resizable.tsx","/home/runner/workspace/client/src/components/ui/scroll-area.tsx","/home/runner/workspace/client/src/components/ui/separator.tsx","/home/runner/workspace/client/src/components/ui/sheet.tsx","/home/runner/workspace/client/src/components/ui/sidebar.tsx","/home/runner/workspace/client/src/components/ui/slider.tsx","/home/runner/workspace/client/src/components/ui/smart-link.tsx","/home/runner/workspace/client/src/components/ui/switch.tsx","/home/runner/workspace/client/src/components/ui/table.tsx","/home/runner/workspace/client/src/components/ui/tabs.tsx","/home/runner/workspace/client/src/components/ui/textarea.tsx","/home/runner/workspace/client/src/components/ui/toast.tsx","/home/runner/workspace/client/src/components/ui/toggle-group.tsx","/home/runner/workspace/client/src/components/ui/toggle.tsx","/home/runner/workspace/client/src/components/ui/tooltip.tsx","/home/runner/workspace/client/src/components/ui/welcome-banner.tsx","/home/runner/workspace/client/src/components/shipping/ShippingCalculator.tsx","/home/runner/workspace/client/src/components/shared/AnimatedComponents.tsx","/home/runner/workspace/client/src/components/shared/ImageUploadZone.tsx","/home/runner/workspace/client/src/components/search/EnhancedSearch.tsx","/home/runner/workspace/client/src/components/search/SearchBar.tsx","/home/runner/workspace/client/src/components/reviews/ProductReviews.tsx","/home/runner/workspace/client/src/components/products/CategoryTabs.tsx","/home/runner/workspace/client/src/components/products/ProductCard.tsx","/home/runner/workspace/client/src/components/products/ProductsResults.tsx","/home/runner/workspace/client/src/components/products/filter-chip.tsx","/home/runner/workspace/client/src/components/products/filter-sidebar.tsx","/home/runner/workspace/client/src/components/products/product-card.tsx","/home/runner/workspace/client/src/components/orders/OrderTracking.tsx","/home/runner/workspace/client/src/components/locality/FreeDeliveryPill.tsx","/home/runner/workspace/client/src/components/locality/LocalBadge.tsx","/home/runner/workspace/client/src/components/locality/ProductAvailabilityChips.tsx","/home/runner/workspace/client/src/components/layout/footer.tsx","/home/runner/workspace/client/src/components/layout/navigation.tsx","/home/runner/workspace/client/src/components/fulfillment/AddToCartEnhanced.tsx","/home/runner/workspace/client/src/components/fulfillment/BlockedCard.tsx","/home/runner/workspace/client/src/components/fulfillment/DeliveryEligibilityBanner.tsx","/home/runner/workspace/client/src/components/fulfillment/FulfillmentBadge.tsx","/home/runner/workspace/client/src/components/fulfillment/LocalBenefitsCard.tsx","/home/runner/workspace/client/src/components/fulfillment/ZipCheck.tsx","/home/runner/workspace/client/src/components/form/DropdownField.tsx","/home/runner/workspace/client/src/components/dashboard/AddressesPanel.tsx","/home/runner/workspace/client/src/components/coupons/CouponInput.tsx","/home/runner/workspace/client/src/components/common/logo.tsx","/home/runner/workspace/client/src/components/checkout/AddressBlock.tsx","/home/runner/workspace/client/src/components/checkout/GuestCheckout.tsx","/home/runner/workspace/client/src/components/checkout/ProfilePrompt.tsx","/home/runner/workspace/client/src/components/categories/category-grid.tsx","/home/runner/workspace/client/src/components/cart/cart-drawer.tsx","/home/runner/workspace/client/src/components/auth/google-signin-button.tsx","/home/runner/workspace/client/src/components/auth/middleware-check.tsx","/home/runner/workspace/client/src/components/auth/password-input.tsx","/home/runner/workspace/client/src/components/auth/password-strength-meter.tsx","/home/runner/workspace/client/src/components/auth/security-notice.tsx","/home/runner/workspace/client/src/components/admin/AdminLayout.tsx","/home/runner/workspace/client/src/components/admin/AnimatedButton.tsx","/home/runner/workspace/client/src/components/admin/CategoryModal.tsx","/home/runner/workspace/client/src/components/admin/DashboardLayout.tsx","/home/runner/workspace/client/src/components/admin/DataTable.tsx","/home/runner/workspace/client/src/components/admin/MetricCard.tsx","/home/runner/workspace/client/src/components/admin/Pagination.tsx","/home/runner/workspace/client/src/components/admin/SubmissionAnalytics.tsx","/home/runner/workspace/client/src/components/admin/SubmissionsGrid.tsx","/home/runner/workspace/client/src/components/admin/SubmissionsList.tsx","/home/runner/workspace/client/src/components/admin/UnifiedButton.tsx","/home/runner/workspace/client/src/components/admin/UnifiedDataTable.tsx","/home/runner/workspace/client/src/components/admin/UnifiedMetricCard.tsx","/home/runner/workspace/client/src/components/admin/category-filter-config.tsx","/home/runner/workspace/client/src/components/admin/category-management.tsx","/home/runner/workspace/client/src/components/admin/modals/EnhancedCategoryModal.tsx","/home/runner/workspace/client/src/components/admin/modals/EnhancedProductModal.tsx","/home/runner/workspace/client/src/components/admin/modals/EnhancedSubmissionModal.tsx","/home/runner/workspace/client/src/components/admin/modals/EnhancedUserModal.tsx","/home/runner/workspace/client/src/components/addresses/AddressForm.tsx","/home/runner/workspace/client/src/components/addresses/AddressList.tsx","/home/runner/workspace/client/src/components/addresses/AddressPicker.tsx"],"tailwindcss":["/home/runner/workspace/tailwind.config.ts"],"tailwindcss-animate":["/home/runner/workspace/tailwind.config.ts"],"@tailwindcss/typography":["/home/runner/workspace/tailwind.config.ts"],"@vitejs/plugin-react":["/home/runner/workspace/vite.config.ts"],"@replit/vite-plugin-runtime-error-modal":["/home/runner/workspace/vite.config.ts"],"@replit/vite-plugin-cartographer":["/home/runner/workspace/vite.config.ts"],"@tanstack/react-query":["/home/runner/workspace/src/lib/locality.ts","/home/runner/workspace/client/src/App.tsx","/home/runner/workspace/client/src/pages/checkout.tsx","/home/runner/workspace/client/src/pages/contact.tsx","/home/runner/workspace/client/src/pages/dashboard.tsx","/home/runner/workspace/client/src/pages/forgot-password.tsx","/home/runner/workspace/client/src/pages/home.tsx","/home/runner/workspace/client/src/pages/observability.tsx","/home/runner/workspace/client/src/pages/orders.tsx","/home/runner/workspace/client/src/pages/product-detail.tsx","/home/runner/workspace/client/src/pages/reset-password.tsx","/home/runner/workspace/client/src/pages/sell-to-us.tsx","/home/runner/workspace/client/src/pages/track-submission.tsx","/home/runner/workspace/client/src/pages/admin/AnalyticsManager.tsx","/home/runner/workspace/client/src/pages/admin/AnalyticsTab.tsx","/home/runner/workspace/client/src/pages/admin/CategoriesTab.tsx","/home/runner/workspace/client/src/pages/admin/CategoryManager.tsx","/home/runner/workspace/client/src/pages/admin/ProductForm.tsx","/home/runner/workspace/client/src/pages/admin/ProductsTab.tsx","/home/runner/workspace/client/src/pages/admin/StripeManager.tsx","/home/runner/workspace/client/src/pages/admin/StripeTab.tsx","/home/runner/workspace/client/src/pages/admin/SubmissionsManager.tsx","/home/runner/workspace/client/src/pages/admin/SubmissionsTab.tsx","/home/runner/workspace/client/src/pages/admin/SystemDashboard.tsx","/home/runner/workspace/client/src/pages/admin/SystemManager.tsx","/home/runner/workspace/client/src/pages/admin/SystemTab.tsx","/home/runner/workspace/client/src/pages/admin/UserManager.tsx","/home/runner/workspace/client/src/pages/admin/UsersTab.tsx","/home/runner/workspace/client/src/lib/queryClient.ts","/home/runner/workspace/client/src/hooks/use-addresses.ts","/home/runner/workspace/client/src/hooks/use-auth.tsx","/home/runner/workspace/client/src/hooks/useCart.ts","/home/runner/workspace/client/src/hooks/useLocalStatus.ts","/home/runner/workspace/client/src/hooks/useLocality.ts","/home/runner/workspace/client/src/hooks/useNavigation.ts","/home/runner/workspace/client/src/hooks/useProducts.ts","/home/runner/workspace/client/src/contexts/AuthContext.tsx","/home/runner/workspace/client/src/components/ui/welcome-banner.tsx","/home/runner/workspace/client/src/components/shipping/ShippingCalculator.tsx","/home/runner/workspace/client/src/components/search/EnhancedSearch.tsx","/home/runner/workspace/client/src/components/reviews/ProductReviews.tsx","/home/runner/workspace/client/src/components/products/filter-sidebar.tsx","/home/runner/workspace/client/src/components/products/product-card.tsx","/home/runner/workspace/client/src/components/orders/OrderTracking.tsx","/home/runner/workspace/client/src/components/dashboard/AddressesPanel.tsx","/home/runner/workspace/client/src/components/coupons/CouponInput.tsx","/home/runner/workspace/client/src/components/categories/category-grid.tsx","/home/runner/workspace/client/src/components/admin/SubmissionAnalytics.tsx","/home/runner/workspace/client/src/components/admin/category-filter-config.tsx","/home/runner/workspace/client/src/components/admin/category-management.tsx","/home/runner/workspace/client/src/components/admin/modals/EnhancedProductModal.tsx","/home/runner/workspace/client/src/components/addresses/AddressForm.tsx","/home/runner/workspace/client/src/components/addresses/AddressList.tsx"],"drizzle-orm":["/home/runner/workspace/shared/schema.ts","/home/runner/workspace/server/db.ts","/home/runner/workspace/server/index.ts","/home/runner/workspace/server/routes.ts","/home/runner/workspace/server/storage.ts","/home/runner/workspace/server/utils/email.ts","/home/runner/workspace/server/utils/referenceGenerator.ts","/home/runner/workspace/server/utils/safe-query.ts","/home/runner/workspace/server/services/errorLogger.ts","/home/runner/workspace/server/services/localService.ts","/home/runner/workspace/server/services/localityService.ts","/home/runner/workspace/server/services/simple-password-reset.ts","/home/runner/workspace/server/services/stripe-sync.ts","/home/runner/workspace/server/scripts/clear-users-dev.ts","/home/runner/workspace/server/routes/admin-metrics.ts","/home/runner/workspace/server/routes/auth-google.ts","/home/runner/workspace/server/routes/shipping.ts","/home/runner/workspace/server/middleware/requireLocalCustomer.ts","/home/runner/workspace/server/middleware/transaction.ts","/home/runner/workspace/server/locality/getLocalityForRequest.ts","/home/runner/workspace/server/lib/addressService.ts","/home/runner/workspace/server/lib/profile.ts","/home/runner/workspace/server/data/errorStore.ts","/home/runner/workspace/server/data/simpleErrorStore.ts","/home/runner/workspace/server/config/database.ts","/home/runner/workspace/server/config/health.ts","/home/runner/workspace/server/config/search.ts","/home/runner/workspace/server/auth/google-strategy.ts"],"drizzle-zod":["/home/runner/workspace/shared/schema.ts"],"zod":["/home/runner/workspace/shared/schema.ts","/home/runner/workspace/shared/schemas/address.ts","/home/runner/workspace/server/routes/addresses.ts","/home/runner/workspace/server/routes/cart.ts","/home/runner/workspace/server/routes/checkout.ts","/home/runner/workspace/server/routes/shipping.ts","/home/runner/workspace/server/observability/schema.ts","/home/runner/workspace/server/middleware/validation.ts","/home/runner/workspace/client/src/pages/ResetPassword.tsx","/home/runner/workspace/client/src/pages/contact.tsx","/home/runner/workspace/client/src/pages/forgot-password.tsx","/home/runner/workspace/client/src/pages/reset-password.tsx","/home/runner/workspace/client/src/pages/sell-to-us.tsx","/home/runner/workspace/client/src/components/checkout/GuestCheckout.tsx","/home/runner/workspace/client/src/components/addresses/AddressForm.tsx"],"@neondatabase/serverless":["/home/runner/workspace/shared/schema.ts","/home/runner/workspace/server/db.ts","/home/runner/workspace/server/index.ts","/home/runner/workspace/server/routes.ts","/home/runner/workspace/server/storage.ts","/home/runner/workspace/server/utils/email.ts","/home/runner/workspace/server/utils/referenceGenerator.ts","/home/runner/workspace/server/utils/safe-query.ts","/home/runner/workspace/server/services/errorLogger.ts","/home/runner/workspace/server/services/localService.ts","/home/runner/workspace/server/services/localityService.ts","/home/runner/workspace/server/services/simple-password-reset.ts","/home/runner/workspace/server/services/stripe-sync.ts","/home/runner/workspace/server/scripts/clear-users-dev.ts","/home/runner/workspace/server/routes/admin-metrics.ts","/home/runner/workspace/server/routes/auth-google.ts","/home/runner/workspace/server/routes/shipping.ts","/home/runner/workspace/server/middleware/requireLocalCustomer.ts","/home/runner/workspace/server/middleware/transaction.ts","/home/runner/workspace/server/locality/getLocalityForRequest.ts","/home/runner/workspace/server/lib/addressService.ts","/home/runner/workspace/server/lib/profile.ts","/home/runner/workspace/server/data/errorStore.ts","/home/runner/workspace/server/data/simpleErrorStore.ts","/home/runner/workspace/server/config/database.ts","/home/runner/workspace/server/config/health.ts","/home/runner/workspace/server/config/search.ts","/home/runner/workspace/server/auth/google-strategy.ts"],"passport":["/home/runner/workspace/server/auth.ts","/home/runner/workspace/server/routes/auth-google.ts","/home/runner/workspace/server/auth/google-strategy.ts"],"@types/passport":["/home/runner/workspace/server/auth.ts","/home/runner/workspace/server/routes/auth-google.ts","/home/runner/workspace/server/auth/google-strategy.ts"],"passport-local":["/home/runner/workspace/server/auth.ts"],"@types/passport-local":["/home/runner/workspace/server/auth.ts"],"passport-google-oauth20":["/home/runner/workspace/server/auth.ts","/home/runner/workspace/server/routes/auth-google.ts","/home/runner/workspace/server/auth/google-strategy.ts"],"@types/passport-google-oauth20":["/home/runner/workspace/server/auth.ts","/home/runner/workspace/server/routes/auth-google.ts","/home/runner/workspace/server/auth/google-strategy.ts"],"express":["/home/runner/workspace/server/auth.ts","/home/runner/workspace/server/index.ts","/home/runner/workspace/server/routes.ts","/home/runner/workspace/server/vite.ts","/home/runner/workspace/server/services/localityService.ts","/home/runner/workspace/server/services/performanceMonitor.ts","/home/runner/workspace/server/routes/addresses.ts","/home/runner/workspace/server/routes/admin-metrics.ts","/home/runner/workspace/server/routes/auth-google.ts","/home/runner/workspace/server/routes/cart-validation.ts","/home/runner/workspace/server/routes/cart.ts","/home/runner/workspace/server/routes/cart.v2.ts","/home/runner/workspace/server/routes/checkout.ts","/home/runner/workspace/server/routes/health-comprehensive.ts","/home/runner/workspace/server/routes/health.ts","/home/runner/workspace/server/routes/locality.ts","/home/runner/workspace/server/routes/observability.ts","/home/runner/workspace/server/routes/shipping.ts","/home/runner/workspace/server/routes/status.ts","/home/runner/workspace/server/routes/stripe-sync.ts","/home/runner/workspace/server/routes/stripe-webhooks.ts","/home/runner/workspace/server/routes/track-activity.ts","/home/runner/workspace/server/routes/admin/error-management.ts","/home/runner/workspace/server/routes/admin/system-management.ts","/home/runner/workspace/server/middleware/auth.ts","/home/runner/workspace/server/middleware/capture.ts","/home/runner/workspace/server/middleware/compression.ts","/home/runner/workspace/server/middleware/inputSanitization.ts","/home/runner/workspace/server/middleware/monitoring.ts","/home/runner/workspace/server/middleware/rateLimiter.ts","/home/runner/workspace/server/middleware/request-consolidator.ts","/home/runner/workspace/server/middleware/requestLogger.ts","/home/runner/workspace/server/middleware/requireDefaultAddress.ts","/home/runner/workspace/server/middleware/security-enhancements.ts","/home/runner/workspace/server/middleware/security.ts","/home/runner/workspace/server/middleware/securityHeaders.ts","/home/runner/workspace/server/middleware/transaction.ts","/home/runner/workspace/server/middleware/unifiedErrorHandler.ts","/home/runner/workspace/server/middleware/validation.ts","/home/runner/workspace/server/lib/localityChecker.ts","/home/runner/workspace/server/config/compression.d.ts","/home/runner/workspace/server/config/compression.ts","/home/runner/workspace/server/config/health.ts","/home/runner/workspace/server/config/production-optimizations.ts","/home/runner/workspace/server/@types/compression.d.ts"],"@types/express":["/home/runner/workspace/server/auth.ts","/home/runner/workspace/server/index.ts","/home/runner/workspace/server/routes.ts","/home/runner/workspace/server/vite.ts","/home/runner/workspace/server/utils/_diagnostic.ts","/home/runner/workspace/server/services/globalErrorCatcher.ts","/home/runner/workspace/server/services/localityService.ts","/home/runner/workspace/server/services/performanceMonitor.ts","/home/runner/workspace/server/routes/addresses.ts","/home/runner/workspace/server/routes/admin-metrics.ts","/home/runner/workspace/server/routes/auth-google.ts","/home/runner/workspace/server/routes/cart-validation.ts","/home/runner/workspace/server/routes/cart.ts","/home/runner/workspace/server/routes/cart.v2.ts","/home/runner/workspace/server/routes/checkout.ts","/home/runner/workspace/server/routes/health-comprehensive.ts","/home/runner/workspace/server/routes/health.ts","/home/runner/workspace/server/routes/locality.ts","/home/runner/workspace/server/routes/observability.ts","/home/runner/workspace/server/routes/shipping.ts","/home/runner/workspace/server/routes/status.ts","/home/runner/workspace/server/routes/stripe-sync.ts","/home/runner/workspace/server/routes/stripe-webhooks.ts","/home/runner/workspace/server/routes/track-activity.ts","/home/runner/workspace/server/routes/admin/error-management.ts","/home/runner/workspace/server/routes/admin/system-management.ts","/home/runner/workspace/server/middleware/auth.ts","/home/runner/workspace/server/middleware/capture.ts","/home/runner/workspace/server/middleware/cartLocalityEnforcement.ts","/home/runner/workspace/server/middleware/compression.ts","/home/runner/workspace/server/middleware/ensureSession.ts","/home/runner/workspace/server/middleware/error-handler.ts","/home/runner/workspace/server/middleware/inputSanitization.ts","/home/runner/workspace/server/middleware/monitoring.ts","/home/runner/workspace/server/middleware/performanceOptimization.ts","/home/runner/workspace/server/middleware/request-consolidator.ts","/home/runner/workspace/server/middleware/requestLogger.ts","/home/runner/workspace/server/middleware/requireDefaultAddress.ts","/home/runner/workspace/server/middleware/requireLocalCustomer.ts","/home/runner/workspace/server/middleware/security-enhancements.ts","/home/runner/workspace/server/middleware/security.ts","/home/runner/workspace/server/middleware/securityHeaders.ts","/home/runner/workspace/server/middleware/transaction.ts","/home/runner/workspace/server/middleware/unifiedErrorHandler.ts","/home/runner/workspace/server/middleware/validation.ts","/home/runner/workspace/server/locality/locality.controller.ts","/home/runner/workspace/server/lib/localityChecker.ts","/home/runner/workspace/server/config/compression.d.ts","/home/runner/workspace/server/config/compression.ts","/home/runner/workspace/server/config/health.ts","/home/runner/workspace/server/config/production-optimizations.ts","/home/runner/workspace/server/@types/compression.d.ts"],"express-session":["/home/runner/workspace/server/auth.ts"],"@types/express-session":["/home/runner/workspace/server/auth.ts"],"bcryptjs":["/home/runner/workspace/server/auth.ts","/home/runner/workspace/server/routes.ts","/home/runner/workspace/server/services/simple-password-reset.ts"],"@shared/schema":["/home/runner/workspace/server/auth.ts","/home/runner/workspace/server/routes.ts","/home/runner/workspace/server/storage.ts","/home/runner/workspace/server/utils/referenceGenerator.ts","/home/runner/workspace/server/scripts/clear-users-dev.ts","/home/runner/workspace/server/routes/admin-metrics.ts","/home/runner/workspace/server/routes/auth-google.ts","/home/runner/workspace/server/middleware/requireLocalCustomer.ts","/home/runner/workspace/server/middleware/transaction.ts","/home/runner/workspace/server/locality/getLocalityForRequest.ts","/home/runner/workspace/server/lib/addressService.ts","/home/runner/workspace/server/lib/profile.ts","/home/runner/workspace/server/config/database.ts","/home/runner/workspace/server/auth/google-strategy.ts","/home/runner/workspace/client/src/pages/auth.tsx","/home/runner/workspace/client/src/pages/dashboard.tsx","/home/runner/workspace/client/src/pages/home.tsx","/home/runner/workspace/client/src/pages/orders.tsx","/home/runner/workspace/client/src/pages/product-detail.tsx","/home/runner/workspace/client/src/pages/sell-to-us.tsx","/home/runner/workspace/client/src/pages/admin/CategoryManager.tsx","/home/runner/workspace/client/src/pages/admin/UserManager.tsx","/home/runner/workspace/client/src/hooks/use-auth.tsx","/home/runner/workspace/client/src/hooks/useProducts.ts","/home/runner/workspace/client/src/contexts/AuthContext.tsx","/home/runner/workspace/client/src/components/products/ProductsResults.tsx","/home/runner/workspace/client/src/components/products/filter-sidebar.tsx","/home/runner/workspace/client/src/components/products/product-card.tsx","/home/runner/workspace/client/src/components/products/product-grid.tsx","/home/runner/workspace/client/src/components/admin/CategoryModal.tsx"],"connect-pg-simple":["/home/runner/workspace/server/auth.ts"],"@types/connect-pg-simple":["/home/runner/workspace/server/auth.ts"],"@shared/utils":["/home/runner/workspace/server/auth.ts","/home/runner/workspace/server/storage.ts"],"ws":["/home/runner/workspace/server/db.ts","/home/runner/workspace/server/websocket.ts"],"@types/ws":["/home/runner/workspace/server/db.ts","/home/runner/workspace/server/websocket.ts"],"compression":["/home/runner/workspace/server/index.ts","/home/runner/workspace/server/middleware/compression.ts","/home/runner/workspace/server/config/compression.ts","/home/runner/workspace/server/config/production-optimizations.ts"],"stripe":["/home/runner/workspace/server/routes.ts","/home/runner/workspace/server/services/stripe-sync.ts","/home/runner/workspace/server/routes/stripe-webhooks.ts"],"lru-cache":["/home/runner/workspace/server/routes.ts"],"express-rate-limit":["/home/runner/workspace/server/routes.ts","/home/runner/workspace/server/middleware/rateLimiter.ts","/home/runner/workspace/server/middleware/security-enhancements.ts","/home/runner/workspace/server/middleware/security.ts"],"@types/express-rate-limit":["/home/runner/workspace/server/routes.ts","/home/runner/workspace/server/middleware/rateLimiter.ts","/home/runner/workspace/server/middleware/security-enhancements.ts","/home/runner/workspace/server/middleware/security.ts"],"multer":["/home/runner/workspace/server/routes.ts","/home/runner/workspace/server/config/cloudinary.ts"],"@types/multer":["/home/runner/workspace/server/routes.ts","/home/runner/workspace/server/config/cloudinary.ts"],"cors":["/home/runner/workspace/server/routes.ts"],"@types/cors":["/home/runner/workspace/server/routes.ts"],"@shared/locality":["/home/runner/workspace/server/routes.ts"],"sharp":["/home/runner/workspace/server/routes.ts"],"nanoid":["/home/runner/workspace/server/vite.ts"],"dompurify":["/home/runner/workspace/server/utils/input-sanitization.ts","/home/runner/workspace/server/middleware/inputSanitization.ts"],"@types/dompurify":["/home/runner/workspace/server/utils/input-sanitization.ts","/home/runner/workspace/server/middleware/inputSanitization.ts"],"jsdom":["/home/runner/workspace/server/utils/input-sanitization.ts","/home/runner/workspace/server/middleware/inputSanitization.ts"],"@types/jsdom":["/home/runner/workspace/server/utils/input-sanitization.ts","/home/runner/workspace/server/middleware/inputSanitization.ts"],"chalk":["/home/runner/workspace/server/utils/startup-banner.ts","/home/runner/workspace/server/config/logger.ts"],"resend":["/home/runner/workspace/server/services/email.ts","/home/runner/workspace/server/services/simple-password-reset.ts"],"helmet":["/home/runner/workspace/server/middleware/security-enhancements.ts","/home/runner/workspace/server/middleware/security.ts"],"cloudinary":["/home/runner/workspace/server/config/cloudinary.ts"],"winston":["/home/runner/workspace/server/config/logger.ts"],"redis":["/home/runner/workspace/server/config/redis.ts"],"@types/redis":["/home/runner/workspace/server/config/redis.ts"],"socket.io":["/home/runner/workspace/server/config/websocket.ts"],"glob":["/home/runner/workspace/scripts/denylist-check.js"],"fast-glob":["/home/runner/workspace/scripts/find-duplicate-files.mjs"],"@types/react":["/home/runner/workspace/client/src/App.tsx","/home/runner/workspace/client/src/main.tsx","/home/runner/workspace/client/src/pages/ResetPassword.tsx","/home/runner/workspace/client/src/pages/addresses.tsx","/home/runner/workspace/client/src/pages/auth.tsx","/home/runner/workspace/client/src/pages/checkout.tsx","/home/runner/workspace/client/src/pages/contact.tsx","/home/runner/workspace/client/src/pages/dashboard.tsx","/home/runner/workspace/client/src/pages/forgot-password.tsx","/home/runner/workspace/client/src/pages/home.tsx","/home/runner/workspace/client/src/pages/observability.tsx","/home/runner/workspace/client/src/pages/orders.tsx","/home/runner/workspace/client/src/pages/product-detail.tsx","/home/runner/workspace/client/src/pages/products.tsx","/home/runner/workspace/client/src/pages/reset-password.tsx","/home/runner/workspace/client/src/pages/sell-to-us.tsx","/home/runner/workspace/client/src/pages/track-submission.tsx","/home/runner/workspace/client/src/pages/admin/AnalyticsManager.tsx","/home/runner/workspace/client/src/pages/admin/AnalyticsTab.tsx","/home/runner/workspace/client/src/pages/admin/CategoriesTab.tsx","/home/runner/workspace/client/src/pages/admin/CategoryManager.tsx","/home/runner/workspace/client/src/pages/admin/ProductForm.tsx","/home/runner/workspace/client/src/pages/admin/ProductsTab.tsx","/home/runner/workspace/client/src/pages/admin/StripeManager.tsx","/home/runner/workspace/client/src/pages/admin/StripeTab.tsx","/home/runner/workspace/client/src/pages/admin/SubmissionsManager.tsx","/home/runner/workspace/client/src/pages/admin/SubmissionsTab.tsx","/home/runner/workspace/client/src/pages/admin/SystemDashboard.tsx","/home/runner/workspace/client/src/pages/admin/SystemManager.tsx","/home/runner/workspace/client/src/pages/admin/SystemTab.tsx","/home/runner/workspace/client/src/pages/admin/UserManager.tsx","/home/runner/workspace/client/src/pages/admin/UsersTab.tsx","/home/runner/workspace/client/src/lib/protected-route.tsx","/home/runner/workspace/client/src/hooks/use-auth.tsx","/home/runner/workspace/client/src/hooks/use-live-data.tsx","/home/runner/workspace/client/src/hooks/use-mobile.tsx","/home/runner/workspace/client/src/hooks/use-toast.ts","/home/runner/workspace/client/src/hooks/useBackButton.ts","/home/runner/workspace/client/src/hooks/useClickOutside.ts","/home/runner/workspace/client/src/hooks/useCloudinaryUpload.tsx","/home/runner/workspace/client/src/hooks/useDebounce.ts","/home/runner/workspace/client/src/hooks/useDefaultAddress.ts","/home/runner/workspace/client/src/hooks/useErrorReporting.ts","/home/runner/workspace/client/src/hooks/useFocusOnArrival.ts","/home/runner/workspace/client/src/hooks/useKeyboardNavigation.ts","/home/runner/workspace/client/src/hooks/useLocality.ts","/home/runner/workspace/client/src/hooks/useNavigationState.ts","/home/runner/workspace/client/src/hooks/useProductLiveSync.ts","/home/runner/workspace/client/src/hooks/useProducts.ts","/home/runner/workspace/client/src/hooks/useProductsState.ts","/home/runner/workspace/client/src/hooks/useSafePortal.ts","/home/runner/workspace/client/src/hooks/useScrollLock.tsx","/home/runner/workspace/client/src/hooks/useUnifiedUpload.tsx","/home/runner/workspace/client/src/hooks/useUnsavedChanges.ts","/home/runner/workspace/client/src/hooks/useWebSocketState.tsx","/home/runner/workspace/client/src/contexts/AuthContext.tsx","/home/runner/workspace/client/src/components/AddToCartButton.tsx","/home/runner/workspace/client/src/components/AddToCartButtonUnified.tsx","/home/runner/workspace/client/src/components/Analytics.tsx","/home/runner/workspace/client/src/components/ConfirmDialog.tsx","/home/runner/workspace/client/src/components/ErrorBoundary.tsx","/home/runner/workspace/client/src/components/ImageWithFallback.tsx","/home/runner/workspace/client/src/components/PWAInstaller.tsx","/home/runner/workspace/client/src/components/ProtectedRoute.tsx","/home/runner/workspace/client/src/components/SEOHead.tsx","/home/runner/workspace/client/src/components/error-boundary.tsx","/home/runner/workspace/client/src/components/ui/Dropdown.tsx","/home/runner/workspace/client/src/components/ui/FormElements.tsx","/home/runner/workspace/client/src/components/ui/LoadingSpinner.tsx","/home/runner/workspace/client/src/components/ui/PortalErrorBoundary.tsx","/home/runner/workspace/client/src/components/ui/ProductPrice.tsx","/home/runner/workspace/client/src/components/ui/QuantitySelector.tsx","/home/runner/workspace/client/src/components/ui/StockIndicator.tsx","/home/runner/workspace/client/src/components/ui/accordion.tsx","/home/runner/workspace/client/src/components/ui/address-autocomplete.tsx","/home/runner/workspace/client/src/components/ui/alert-dialog.tsx","/home/runner/workspace/client/src/components/ui/alert.tsx","/home/runner/workspace/client/src/components/ui/aspect-ratio.tsx","/home/runner/workspace/client/src/components/ui/avatar.tsx","/home/runner/workspace/client/src/components/ui/badge.tsx","/home/runner/workspace/client/src/components/ui/breadcrumb.tsx","/home/runner/workspace/client/src/components/ui/button.tsx","/home/runner/workspace/client/src/components/ui/calendar.tsx","/home/runner/workspace/client/src/components/ui/card.tsx","/home/runner/workspace/client/src/components/ui/carousel.tsx","/home/runner/workspace/client/src/components/ui/chart.tsx","/home/runner/workspace/client/src/components/ui/checkbox.tsx","/home/runner/workspace/client/src/components/ui/collapsible.tsx","/home/runner/workspace/client/src/components/ui/dialog.tsx","/home/runner/workspace/client/src/components/ui/drawer.tsx","/home/runner/workspace/client/src/components/ui/form.tsx","/home/runner/workspace/client/src/components/ui/hover-card.tsx","/home/runner/workspace/client/src/components/ui/input-otp.tsx","/home/runner/workspace/client/src/components/ui/input.tsx","/home/runner/workspace/client/src/components/ui/label.tsx","/home/runner/workspace/client/src/components/ui/pagination.tsx","/home/runner/workspace/client/src/components/ui/popover.tsx","/home/runner/workspace/client/src/components/ui/price-input.tsx","/home/runner/workspace/client/src/components/ui/progress.tsx","/home/runner/workspace/client/src/components/ui/radio-group.tsx","/home/runner/workspace/client/src/components/ui/scroll-area.tsx","/home/runner/workspace/client/src/components/ui/separator.tsx","/home/runner/workspace/client/src/components/ui/sheet.tsx","/home/runner/workspace/client/src/components/ui/sidebar.tsx","/home/runner/workspace/client/src/components/ui/slider.tsx","/home/runner/workspace/client/src/components/ui/switch.tsx","/home/runner/workspace/client/src/components/ui/table.tsx","/home/runner/workspace/client/src/components/ui/tabs.tsx","/home/runner/workspace/client/src/components/ui/textarea.tsx","/home/runner/workspace/client/src/components/ui/toast.tsx","/home/runner/workspace/client/src/components/ui/toggle-group.tsx","/home/runner/workspace/client/src/components/ui/toggle.tsx","/home/runner/workspace/client/src/components/ui/tooltip.tsx","/home/runner/workspace/client/src/components/ui/welcome-banner.tsx","/home/runner/workspace/client/src/components/shipping/ShippingCalculator.tsx","/home/runner/workspace/client/src/components/shared/AnimatedComponents.tsx","/home/runner/workspace/client/src/components/shared/ImageUploadZone.tsx","/home/runner/workspace/client/src/components/search/EnhancedSearch.tsx","/home/runner/workspace/client/src/components/search/SearchBar.tsx","/home/runner/workspace/client/src/components/reviews/ProductReviews.tsx","/home/runner/workspace/client/src/components/products/CategoryTabs.tsx","/home/runner/workspace/client/src/components/products/ProductCard.tsx","/home/runner/workspace/client/src/components/products/ProductsResults.tsx","/home/runner/workspace/client/src/components/products/filter-sidebar.tsx","/home/runner/workspace/client/src/components/products/product-card.tsx","/home/runner/workspace/client/src/components/locality/ProductAvailabilityChips.tsx","/home/runner/workspace/client/src/components/layout/navigation.tsx","/home/runner/workspace/client/src/components/fulfillment/AddToCartEnhanced.tsx","/home/runner/workspace/client/src/components/fulfillment/DeliveryEligibilityBanner.tsx","/home/runner/workspace/client/src/components/fulfillment/FulfillmentBadge.tsx","/home/runner/workspace/client/src/components/fulfillment/LocalBenefitsCard.tsx","/home/runner/workspace/client/src/components/fulfillment/ZipCheck.tsx","/home/runner/workspace/client/src/components/form/DropdownField.tsx","/home/runner/workspace/client/src/components/dashboard/AddressesPanel.tsx","/home/runner/workspace/client/src/components/coupons/CouponInput.tsx","/home/runner/workspace/client/src/components/checkout/AddressBlock.tsx","/home/runner/workspace/client/src/components/checkout/GuestCheckout.tsx","/home/runner/workspace/client/src/components/checkout/ProfilePrompt.tsx","/home/runner/workspace/client/src/components/cart/cart-drawer.tsx","/home/runner/workspace/client/src/components/auth/google-signin-button.tsx","/home/runner/workspace/client/src/components/auth/middleware-check.tsx","/home/runner/workspace/client/src/components/auth/password-input.tsx","/home/runner/workspace/client/src/components/admin/AdminLayout.tsx","/home/runner/workspace/client/src/components/admin/AnimatedButton.tsx","/home/runner/workspace/client/src/components/admin/CategoryModal.tsx","/home/runner/workspace/client/src/components/admin/DashboardLayout.tsx","/home/runner/workspace/client/src/components/admin/DataTable.tsx","/home/runner/workspace/client/src/components/admin/MetricCard.tsx","/home/runner/workspace/client/src/components/admin/UnifiedDataTable.tsx","/home/runner/workspace/client/src/components/admin/category-filter-config.tsx","/home/runner/workspace/client/src/components/admin/category-management.tsx","/home/runner/workspace/client/src/components/admin/modals/EnhancedCategoryModal.tsx","/home/runner/workspace/client/src/components/admin/modals/EnhancedProductModal.tsx","/home/runner/workspace/client/src/components/admin/modals/EnhancedSubmissionModal.tsx","/home/runner/workspace/client/src/components/admin/modals/EnhancedUserModal.tsx","/home/runner/workspace/client/src/components/addresses/AddressForm.tsx","/home/runner/workspace/client/src/components/addresses/AddressList.tsx","/home/runner/workspace/client/src/components/addresses/AddressPicker.tsx"],"wouter":["/home/runner/workspace/client/src/App.tsx","/home/runner/workspace/client/src/pages/ResetPassword.tsx","/home/runner/workspace/client/src/pages/about.tsx","/home/runner/workspace/client/src/pages/addresses.tsx","/home/runner/workspace/client/src/pages/admin.tsx","/home/runner/workspace/client/src/pages/auth.tsx","/home/runner/workspace/client/src/pages/cart.tsx","/home/runner/workspace/client/src/pages/dashboard.tsx","/home/runner/workspace/client/src/pages/forgot-password.tsx","/home/runner/workspace/client/src/pages/home.tsx","/home/runner/workspace/client/src/pages/orders.tsx","/home/runner/workspace/client/src/pages/product-detail.tsx","/home/runner/workspace/client/src/pages/reset-password.tsx","/home/runner/workspace/client/src/pages/track-submission.tsx","/home/runner/workspace/client/src/pages/admin/ProductForm.tsx","/home/runner/workspace/client/src/lib/protected-route.tsx","/home/runner/workspace/client/src/hooks/useFocusOnArrival.ts","/home/runner/workspace/client/src/hooks/useNavigation.ts","/home/runner/workspace/client/src/hooks/useNavigationState.ts","/home/runner/workspace/client/src/hooks/useProductsState.ts","/home/runner/workspace/client/src/components/AddToCartButton.tsx","/home/runner/workspace/client/src/components/Analytics.tsx","/home/runner/workspace/client/src/components/ProtectedRoute.tsx","/home/runner/workspace/client/src/components/SEOHead.tsx","/home/runner/workspace/client/src/components/ui/smart-link.tsx","/home/runner/workspace/client/src/components/search/EnhancedSearch.tsx","/home/runner/workspace/client/src/components/search/SearchBar.tsx","/home/runner/workspace/client/src/components/products/ProductCard.tsx","/home/runner/workspace/client/src/components/layout/footer.tsx","/home/runner/workspace/client/src/components/layout/navigation.tsx","/home/runner/workspace/client/src/components/fulfillment/AddToCartEnhanced.tsx","/home/runner/workspace/client/src/components/common/logo.tsx","/home/runner/workspace/client/src/components/checkout/ProfilePrompt.tsx","/home/runner/workspace/client/src/components/categories/category-grid.tsx","/home/runner/workspace/client/src/components/cart/cart-drawer.tsx","/home/runner/workspace/client/src/components/auth/middleware-check.tsx","/home/runner/workspace/client/src/components/admin/AdminLayout.tsx"],"react-dom":["/home/runner/workspace/client/src/main.tsx","/home/runner/workspace/client/src/pages/about.tsx","/home/runner/workspace/client/src/pages/checkout.tsx","/home/runner/workspace/client/src/pages/home.tsx","/home/runner/workspace/client/src/pages/observability.tsx","/home/runner/workspace/client/src/pages/products.tsx","/home/runner/workspace/client/src/pages/admin/AnalyticsTab.tsx","/home/runner/workspace/client/src/components/ConfirmDialog.tsx","/home/runner/workspace/client/src/components/ui/Dropdown.tsx","/home/runner/workspace/client/src/components/ui/accordion.tsx","/home/runner/workspace/client/src/components/ui/alert-dialog.tsx","/home/runner/workspace/client/src/components/ui/aspect-ratio.tsx","/home/runner/workspace/client/src/components/ui/avatar.tsx","/home/runner/workspace/client/src/components/ui/chart.tsx","/home/runner/workspace/client/src/components/ui/checkbox.tsx","/home/runner/workspace/client/src/components/ui/collapsible.tsx","/home/runner/workspace/client/src/components/ui/dialog.tsx","/home/runner/workspace/client/src/components/ui/drawer.tsx","/home/runner/workspace/client/src/components/ui/form.tsx","/home/runner/workspace/client/src/components/ui/hover-card.tsx","/home/runner/workspace/client/src/components/ui/input-otp.tsx","/home/runner/workspace/client/src/components/ui/label.tsx","/home/runner/workspace/client/src/components/ui/popover.tsx","/home/runner/workspace/client/src/components/ui/progress.tsx","/home/runner/workspace/client/src/components/ui/radio-group.tsx","/home/runner/workspace/client/src/components/ui/resizable.tsx","/home/runner/workspace/client/src/components/ui/scroll-area.tsx","/home/runner/workspace/client/src/components/ui/separator.tsx","/home/runner/workspace/client/src/components/ui/sheet.tsx","/home/runner/workspace/client/src/components/ui/slider.tsx","/home/runner/workspace/client/src/components/ui/switch.tsx","/home/runner/workspace/client/src/components/ui/tabs.tsx","/home/runner/workspace/client/src/components/ui/toast.tsx","/home/runner/workspace/client/src/components/ui/toggle-group.tsx","/home/runner/workspace/client/src/components/ui/toggle.tsx","/home/runner/workspace/client/src/components/ui/tooltip.tsx","/home/runner/workspace/client/src/components/shared/AnimatedComponents.tsx","/home/runner/workspace/client/src/components/layout/navigation.tsx"],"@types/react-dom":["/home/runner/workspace/client/src/main.tsx","/home/runner/workspace/client/src/components/ConfirmDialog.tsx","/home/runner/workspace/client/src/components/ui/Dropdown.tsx","/home/runner/workspace/client/src/components/ui/accordion.tsx","/home/runner/workspace/client/src/components/ui/alert-dialog.tsx","/home/runner/workspace/client/src/components/ui/aspect-ratio.tsx","/home/runner/workspace/client/src/components/ui/avatar.tsx","/home/runner/workspace/client/src/components/ui/checkbox.tsx","/home/runner/workspace/client/src/components/ui/collapsible.tsx","/home/runner/workspace/client/src/components/ui/dialog.tsx","/home/runner/workspace/client/src/components/ui/form.tsx","/home/runner/workspace/client/src/components/ui/hover-card.tsx","/home/runner/workspace/client/src/components/ui/label.tsx","/home/runner/workspace/client/src/components/ui/popover.tsx","/home/runner/workspace/client/src/components/ui/progress.tsx","/home/runner/workspace/client/src/components/ui/radio-group.tsx","/home/runner/workspace/client/src/components/ui/scroll-area.tsx","/home/runner/workspace/client/src/components/ui/separator.tsx","/home/runner/workspace/client/src/components/ui/sheet.tsx","/home/runner/workspace/client/src/components/ui/slider.tsx","/home/runner/workspace/client/src/components/ui/switch.tsx","/home/runner/workspace/client/src/components/ui/tabs.tsx","/home/runner/workspace/client/src/components/ui/toast.tsx","/home/runner/workspace/client/src/components/ui/toggle-group.tsx","/home/runner/workspace/client/src/components/ui/toggle.tsx","/home/runner/workspace/client/src/components/ui/tooltip.tsx","/home/runner/workspace/client/src/components/layout/navigation.tsx"],"react-hook-form":["/home/runner/workspace/client/src/pages/ResetPassword.tsx","/home/runner/workspace/client/src/pages/contact.tsx","/home/runner/workspace/client/src/pages/forgot-password.tsx","/home/runner/workspace/client/src/pages/reset-password.tsx","/home/runner/workspace/client/src/pages/sell-to-us.tsx","/home/runner/workspace/client/src/components/ui/RHFDropdown.tsx","/home/runner/workspace/client/src/components/ui/form.tsx","/home/runner/workspace/client/src/components/form/DropdownField.tsx","/home/runner/workspace/client/src/components/checkout/GuestCheckout.tsx","/home/runner/workspace/client/src/components/addresses/AddressForm.tsx"],"@hookform/resolvers":["/home/runner/workspace/client/src/pages/ResetPassword.tsx","/home/runner/workspace/client/src/pages/contact.tsx","/home/runner/workspace/client/src/pages/forgot-password.tsx","/home/runner/workspace/client/src/pages/reset-password.tsx","/home/runner/workspace/client/src/pages/sell-to-us.tsx","/home/runner/workspace/client/src/components/checkout/GuestCheckout.tsx","/home/runner/workspace/client/src/components/addresses/AddressForm.tsx"],"lucide-react":["/home/runner/workspace/client/src/pages/ResetPassword.tsx","/home/runner/workspace/client/src/pages/about.tsx","/home/runner/workspace/client/src/pages/addresses.tsx","/home/runner/workspace/client/src/pages/auth.tsx","/home/runner/workspace/client/src/pages/cart.tsx","/home/runner/workspace/client/src/pages/checkout.tsx","/home/runner/workspace/client/src/pages/contact.tsx","/home/runner/workspace/client/src/pages/dashboard.tsx","/home/runner/workspace/client/src/pages/forgot-password.tsx","/home/runner/workspace/client/src/pages/home.tsx","/home/runner/workspace/client/src/pages/observability.tsx","/home/runner/workspace/client/src/pages/orders.tsx","/home/runner/workspace/client/src/pages/product-detail.tsx","/home/runner/workspace/client/src/pages/reset-password.tsx","/home/runner/workspace/client/src/pages/sell-to-us.tsx","/home/runner/workspace/client/src/pages/track-submission.tsx","/home/runner/workspace/client/src/pages/admin/AnalyticsManager.tsx","/home/runner/workspace/client/src/pages/admin/AnalyticsTab.tsx","/home/runner/workspace/client/src/pages/admin/CategoriesTab.tsx","/home/runner/workspace/client/src/pages/admin/CategoryManager.tsx","/home/runner/workspace/client/src/pages/admin/ProductForm.tsx","/home/runner/workspace/client/src/pages/admin/ProductsTab.tsx","/home/runner/workspace/client/src/pages/admin/StripeManager.tsx","/home/runner/workspace/client/src/pages/admin/StripeTab.tsx","/home/runner/workspace/client/src/pages/admin/SubmissionsManager.tsx","/home/runner/workspace/client/src/pages/admin/SubmissionsTab.tsx","/home/runner/workspace/client/src/pages/admin/SystemDashboard.tsx","/home/runner/workspace/client/src/pages/admin/SystemManager.tsx","/home/runner/workspace/client/src/pages/admin/SystemTab.tsx","/home/runner/workspace/client/src/pages/admin/UserManager.tsx","/home/runner/workspace/client/src/pages/admin/UsersTab.tsx","/home/runner/workspace/client/src/lib/protected-route.tsx","/home/runner/workspace/client/src/components/AddToCartButton.tsx","/home/runner/workspace/client/src/components/AddToCartButtonUnified.tsx","/home/runner/workspace/client/src/components/ConfirmDialog.tsx","/home/runner/workspace/client/src/components/ErrorBoundary.tsx","/home/runner/workspace/client/src/components/PWAInstaller.tsx","/home/runner/workspace/client/src/components/error-boundary.tsx","/home/runner/workspace/client/src/components/ui/Dropdown.tsx","/home/runner/workspace/client/src/components/ui/EmptyState.tsx","/home/runner/workspace/client/src/components/ui/LocalDeliveryBadge.tsx","/home/runner/workspace/client/src/components/ui/QuantitySelector.tsx","/home/runner/workspace/client/src/components/ui/StockIndicator.tsx","/home/runner/workspace/client/src/components/ui/accordion.tsx","/home/runner/workspace/client/src/components/ui/address-autocomplete.tsx","/home/runner/workspace/client/src/components/ui/address-display.tsx","/home/runner/workspace/client/src/components/ui/breadcrumb.tsx","/home/runner/workspace/client/src/components/ui/button.tsx","/home/runner/workspace/client/src/components/ui/carousel.tsx","/home/runner/workspace/client/src/components/ui/checkbox.tsx","/home/runner/workspace/client/src/components/ui/dialog.tsx","/home/runner/workspace/client/src/components/ui/input-otp.tsx","/home/runner/workspace/client/src/components/ui/pagination.tsx","/home/runner/workspace/client/src/components/ui/radio-group.tsx","/home/runner/workspace/client/src/components/ui/resizable.tsx","/home/runner/workspace/client/src/components/ui/sheet.tsx","/home/runner/workspace/client/src/components/ui/sidebar.tsx","/home/runner/workspace/client/src/components/ui/toast.tsx","/home/runner/workspace/client/src/components/ui/welcome-banner.tsx","/home/runner/workspace/client/src/components/shipping/ShippingCalculator.tsx","/home/runner/workspace/client/src/components/shared/ImageUploadZone.tsx","/home/runner/workspace/client/src/components/search/EnhancedSearch.tsx","/home/runner/workspace/client/src/components/search/SearchBar.tsx","/home/runner/workspace/client/src/components/reviews/ProductReviews.tsx","/home/runner/workspace/client/src/components/products/filter-chip.tsx","/home/runner/workspace/client/src/components/products/filter-sidebar.tsx","/home/runner/workspace/client/src/components/products/product-card.tsx","/home/runner/workspace/client/src/components/orders/OrderTracking.tsx","/home/runner/workspace/client/src/components/locality/FreeDeliveryPill.tsx","/home/runner/workspace/client/src/components/locality/LocalBadge.tsx","/home/runner/workspace/client/src/components/layout/footer.tsx","/home/runner/workspace/client/src/components/layout/navigation.tsx","/home/runner/workspace/client/src/components/fulfillment/AddToCartEnhanced.tsx","/home/runner/workspace/client/src/components/fulfillment/BlockedCard.tsx","/home/runner/workspace/client/src/components/fulfillment/DeliveryEligibilityBanner.tsx","/home/runner/workspace/client/src/components/fulfillment/FulfillmentBadge.tsx","/home/runner/workspace/client/src/components/fulfillment/LocalBenefitsCard.tsx","/home/runner/workspace/client/src/components/fulfillment/ZipCheck.tsx","/home/runner/workspace/client/src/components/dashboard/AddressesPanel.tsx","/home/runner/workspace/client/src/components/coupons/CouponInput.tsx","/home/runner/workspace/client/src/components/checkout/GuestCheckout.tsx","/home/runner/workspace/client/src/components/checkout/ProfilePrompt.tsx","/home/runner/workspace/client/src/components/cart/cart-drawer.tsx","/home/runner/workspace/client/src/components/auth/google-signin-button.tsx","/home/runner/workspace/client/src/components/auth/password-input.tsx","/home/runner/workspace/client/src/components/auth/password-strength-meter.tsx","/home/runner/workspace/client/src/components/auth/security-notice.tsx","/home/runner/workspace/client/src/components/admin/AdminLayout.tsx","/home/runner/workspace/client/src/components/admin/AnimatedButton.tsx","/home/runner/workspace/client/src/components/admin/DashboardLayout.tsx","/home/runner/workspace/client/src/components/admin/DataTable.tsx","/home/runner/workspace/client/src/components/admin/MetricCard.tsx","/home/runner/workspace/client/src/components/admin/Pagination.tsx","/home/runner/workspace/client/src/components/admin/SubmissionAnalytics.tsx","/home/runner/workspace/client/src/components/admin/SubmissionsGrid.tsx","/home/runner/workspace/client/src/components/admin/SubmissionsList.tsx","/home/runner/workspace/client/src/components/admin/UnifiedButton.tsx","/home/runner/workspace/client/src/components/admin/UnifiedDataTable.tsx","/home/runner/workspace/client/src/components/admin/UnifiedMetricCard.tsx","/home/runner/workspace/client/src/components/admin/category-filter-config.tsx","/home/runner/workspace/client/src/components/admin/category-management.tsx","/home/runner/workspace/client/src/components/admin/modals/EnhancedCategoryModal.tsx","/home/runner/workspace/client/src/components/admin/modals/EnhancedProductModal.tsx","/home/runner/workspace/client/src/components/admin/modals/EnhancedSubmissionModal.tsx","/home/runner/workspace/client/src/components/admin/modals/EnhancedUserModal.tsx","/home/runner/workspace/client/src/components/addresses/AddressForm.tsx","/home/runner/workspace/client/src/components/addresses/AddressList.tsx"],"framer-motion":["/home/runner/workspace/client/src/pages/about.tsx","/home/runner/workspace/client/src/pages/checkout.tsx","/home/runner/workspace/client/src/pages/home.tsx","/home/runner/workspace/client/src/pages/products.tsx","/home/runner/workspace/client/src/components/shared/AnimatedComponents.tsx"],"recharts":["/home/runner/workspace/client/src/pages/observability.tsx","/home/runner/workspace/client/src/pages/admin/AnalyticsTab.tsx","/home/runner/workspace/client/src/components/ui/chart.tsx"],"date-fns":["/home/runner/workspace/client/src/pages/admin/AnalyticsManager.tsx","/home/runner/workspace/client/src/components/ui/calendar.tsx","/home/runner/workspace/client/src/components/reviews/ProductReviews.tsx","/home/runner/workspace/client/src/components/orders/OrderTracking.tsx"],"zustand":["/home/runner/workspace/client/src/lib/cartDrawerStore.ts"],"clsx":["/home/runner/workspace/client/src/lib/utils.ts"],"tailwind-merge":["/home/runner/workspace/client/src/lib/utils.ts"],"@shared/fulfillment":["/home/runner/workspace/client/src/components/AddToCartButton.tsx","/home/runner/workspace/client/src/components/products/ProductCard.tsx","/home/runner/workspace/client/src/components/locality/ProductAvailabilityChips.tsx","/home/runner/workspace/client/src/components/fulfillment/AddToCartEnhanced.tsx","/home/runner/workspace/client/src/components/admin/modals/EnhancedProductModal.tsx"],"@shared/availability":["/home/runner/workspace/client/src/components/AddToCartButton.tsx","/home/runner/workspace/client/src/components/fulfillment/AddToCartEnhanced.tsx"],"@radix-ui/react-accordion":["/home/runner/workspace/client/src/components/ui/accordion.tsx"],"@radix-ui/react-alert-dialog":["/home/runner/workspace/client/src/components/ui/alert-dialog.tsx"],"class-variance-authority":["/home/runner/workspace/client/src/components/ui/alert.tsx","/home/runner/workspace/client/src/components/ui/badge.tsx","/home/runner/workspace/client/src/components/ui/button.tsx","/home/runner/workspace/client/src/components/ui/label.tsx","/home/runner/workspace/client/src/components/ui/sheet.tsx","/home/runner/workspace/client/src/components/ui/sidebar.tsx","/home/runner/workspace/client/src/components/ui/toast.tsx","/home/runner/workspace/client/src/components/ui/toggle-group.tsx","/home/runner/workspace/client/src/components/ui/toggle.tsx"],"@radix-ui/react-aspect-ratio":["/home/runner/workspace/client/src/components/ui/aspect-ratio.tsx"],"@radix-ui/react-avatar":["/home/runner/workspace/client/src/components/ui/avatar.tsx"],"@radix-ui/react-slot":["/home/runner/workspace/client/src/components/ui/breadcrumb.tsx","/home/runner/workspace/client/src/components/ui/button.tsx","/home/runner/workspace/client/src/components/ui/form.tsx","/home/runner/workspace/client/src/components/ui/sidebar.tsx"],"react-day-picker":["/home/runner/workspace/client/src/components/ui/calendar.tsx"],"embla-carousel-react":["/home/runner/workspace/client/src/components/ui/carousel.tsx"],"@radix-ui/react-checkbox":["/home/runner/workspace/client/src/components/ui/checkbox.tsx"],"@radix-ui/react-collapsible":["/home/runner/workspace/client/src/components/ui/collapsible.tsx"],"@radix-ui/react-dialog":["/home/runner/workspace/client/src/components/ui/dialog.tsx","/home/runner/workspace/client/src/components/ui/sheet.tsx"],"vaul":["/home/runner/workspace/client/src/components/ui/drawer.tsx"],"@radix-ui/react-label":["/home/runner/workspace/client/src/components/ui/form.tsx","/home/runner/workspace/client/src/components/ui/label.tsx"],"@radix-ui/react-hover-card":["/home/runner/workspace/client/src/components/ui/hover-card.tsx"],"input-otp":["/home/runner/workspace/client/src/components/ui/input-otp.tsx"],"@radix-ui/react-popover":["/home/runner/workspace/client/src/components/ui/popover.tsx"],"@radix-ui/react-progress":["/home/runner/workspace/client/src/components/ui/progress.tsx"],"@radix-ui/react-radio-group":["/home/runner/workspace/client/src/components/ui/radio-group.tsx"],"react-resizable-panels":["/home/runner/workspace/client/src/components/ui/resizable.tsx"],"@radix-ui/react-scroll-area":["/home/runner/workspace/client/src/components/ui/scroll-area.tsx"],"@radix-ui/react-separator":["/home/runner/workspace/client/src/components/ui/separator.tsx"],"@radix-ui/react-slider":["/home/runner/workspace/client/src/components/ui/slider.tsx"],"@radix-ui/react-switch":["/home/runner/workspace/client/src/components/ui/switch.tsx"],"@radix-ui/react-tabs":["/home/runner/workspace/client/src/components/ui/tabs.tsx"],"@radix-ui/react-toast":["/home/runner/workspace/client/src/components/ui/toast.tsx"],"@radix-ui/react-toggle-group":["/home/runner/workspace/client/src/components/ui/toggle-group.tsx"],"@radix-ui/react-toggle":["/home/runner/workspace/client/src/components/ui/toggle.tsx"],"@radix-ui/react-tooltip":["/home/runner/workspace/client/src/components/ui/tooltip.tsx"]},"invalidFiles":{},"invalidDirs":{"/home/runner/workspace/.config/npm/node_global/bin/pnpm":"Error: ENOENT: no such file or directory, stat '/home/runner/workspace/.config/npm/node_global/bin/pnpm'"}}
attached_assets/Pasted-same-two-problems-you-called-out-in-the-logs-UI-Featured-endpoint-returns-200-with-Content-Len-1755149145908_1755149145908.txt:203:File: server/routes.ts (inside POST /api/cart/items)
attached_assets/Pasted--PROJECT-UPGRADE-REQUEST-ADD-ONLY-NO-BREAKING-CHANGES-TOP-LINE-GOALS-Local-users-must-be-able--1755229470092_1755229470093.txt:33:Keep existing DELETE /api/cart/items/:itemId.
attached_assets/Pasted-PROMPT-FOR-REPLIT-Objective-Finish-locality-safe-cart-operations-and-UI-gating-without-deleting-or--1755207164994_1755207164994.txt:28:Keep any existing delete route (e.g., DELETE /api/cart/items/:itemId).
attached_assets/Pasted-PROMPT-FOR-REPLIT-Objective-Finish-locality-safe-cart-operations-and-UI-gating-without-deleting-or--1755207164994_1755207164994.txt:118:In the existing POST /api/cart/items handler, keep (or add if missing) this logic:
attached_assets/Pasted-PROMPT-FOR-REPLIT-Objective-Finish-locality-safe-cart-operations-and-UI-gating-without-deleting-or--1755207164994_1755207164994.txt:180:DELETE /api/cart/items/:productId → returns { ok:true, removed: 1 } and the item is gone.
attached_assets/Pasted-three-separate-problems-in-your-latest-run-and-they-re-all-fixable-with-small-unified-patches-Wh-1755206619529_1755206619530.txt:171:  const res = await fetch('/api/cart/items', {
attached_assets/Pasted-three-separate-problems-in-your-latest-run-and-they-re-all-fixable-with-small-unified-patches-Wh-1755206619529_1755206619530.txt:186:  const res = await fetch(`/api/cart/items/${encodeURIComponent(productId)}`, {
audit/ssot-allow-ban.json:36:    "server/routes/cart.ts",
attached_assets/Pasted-You-re-local-and-the-v2-handler-is-being-hit-but-it-s-crashing-swift-Copy-Edit-CART-ENFORCE-V2--1755206082063_1755206082063.txt:8:→ POST /api/cart/items → 500
attached_assets/Pasted-You-re-local-and-the-v2-handler-is-being-hit-but-it-s-crashing-swift-Copy-Edit-CART-ENFORCE-V2--1755206082063_1755206082063.txt:106:  await apiJson('/api/cart/items', {
attached_assets/Pasted-logs-make-the-root-cause-pretty-clear-You-are-local-eligible-true-source-DEFAULT-ADDRESS-zip-28806-1755205817700_1755205817701.txt:6:[CART DEBUG] POST /api/cart/items reached handler …
attached_assets/Pasted-logs-make-the-root-cause-pretty-clear-You-are-local-eligible-true-source-DEFAULT-ADDRESS-zip-28806-1755205817700_1755205817701.txt:8:We never see the newer [CART ENFORCE] log we added earlier. That means a legacy /api/cart/items route is still mounted (or mounted earlier in the chain) and it’s using the old, ZIP-only check. A few GETs also show up as guest, which points to cookie/session config inconsistencies for POSTs.
attached_assets/Pasted-logs-make-the-root-cause-pretty-clear-You-are-local-eligible-true-source-DEFAULT-ADDRESS-zip-28806-1755205817700_1755205817701.txt:16:Grep for every definition of /api/cart/items:
attached_assets/Pasted-logs-make-the-root-cause-pretty-clear-You-are-local-eligible-true-source-DEFAULT-ADDRESS-zip-28806-1755205817700_1755205817701.txt:18:rg "app\.post\(.*/api/cart/items" -n server
attached_assets/Pasted-logs-make-the-root-cause-pretty-clear-You-are-local-eligible-true-source-DEFAULT-ADDRESS-zip-28806-1755205817700_1755205817701.txt:125:  await apiJson('/api/cart/items', { method: 'POST', body: JSON.stringify({ productId, quantity }) });
attached_assets/Pasted-What-the-logs-say-symptoms-Cart-add-is-being-403-d-even-when-you-re-local-Evidence-eligible-true-1755204354298_1755204354299.txt:5:POST /api/cart/items 403 … userId: undefined.
attached_assets/Pasted-What-the-logs-say-symptoms-Cart-add-is-being-403-d-even-when-you-re-local-Evidence-eligible-true-1755204354298_1755204354299.txt:11:After the 403, the UI calls DELETE /api/cart/items/:id and gets 404 because the add never succeeded. That’s an optimistic-update rollback bug.
attached_assets/Pasted-What-the-logs-say-symptoms-Cart-add-is-being-403-d-even-when-you-re-local-Evidence-eligible-true-1755204354298_1755204354299.txt:62:await apiJson('/api/cart/items', {
attached_assets/Pasted-What-the-logs-say-symptoms-Cart-add-is-being-403-d-even-when-you-re-local-Evidence-eligible-true-1755204354298_1755204354299.txt:77:  await apiJson('/api/cart/items', { method:'POST', body: JSON.stringify({ productId, quantity }) });
attached_assets/Pasted-What-the-logs-say-symptoms-Cart-add-is-being-403-d-even-when-you-re-local-Evidence-eligible-true-1755204354298_1755204354299.txt:159:app.post('/api/cart/items', requireSession, async (req, res, next) => {
attached_assets/Pasted--Complete-Locality-Fulfillment-Fixes-keep-current-UI-fix-wiring-WHAT-TO-DELIVER-Single-source-of-1755203749380_1755203749380.txt:184:app.post('/api/cart/items', requireSession, async (req, res, next) => {
audit/git-files-before.txt:38635:./server/routes/cart.ts
attached_assets/Pasted-Fix-Local-Only-Cart-Gating-Purge-Stale-Fulfillment-Locality-Code-Single-Source-of-Truth-What-I-m-1755203118734_1755203118735.txt:115:Server POST /api/cart/items must re-check:
attached_assets/Pasted-Fix-Local-Only-Cart-Gating-Purge-Stale-Fulfillment-Locality-Code-Single-Source-of-Truth-What-I-m-1755203118734_1755203118735.txt:174:Server: /api/cart/items rejects non-eligible user on LOCAL_ONLY.
attached_assets/Pasted-Fixes-Replit-should-make-now-1-Build-crash-in-AddressForm-tsx-top-level-await-Log-css-Copy-Edit--1755202693221_1755202693221.txt:47:Logs show we POST /api/cart/items (200), then immediately delete the same item via DELETE /api/cart/items/:id. That means we’re allowing an ineligible add, then cleaning it up. It feels like a race and causes confusing UX.
attached_assets/Pasted-Fixes-Replit-should-make-now-1-Build-crash-in-AddressForm-tsx-top-level-await-Log-css-Copy-Edit--1755202693221_1755202693221.txt:54:// server: POST /api/cart/items
attached_assets/Pasted-Fixes-Replit-should-make-now-1-Build-crash-in-AddressForm-tsx-top-level-await-Log-css-Copy-Edit--1755202693221_1755202693221.txt:208: POST /api/cart/items returns 409 for non-local + local-only.
attached_assets/Pasted-Replit-implementation-brief-Fulfillment-UI-polish-UX-rules-WITH-CODE-0-Ground-rules-Exactly-t-1755202305378_1755202305378.txt:114:POST /api/cart/items must reject when mode=LOCAL_ONLY && !isLocal(zip).
attached_assets/Pasted-Replit-implementation-brief-Fulfillment-UI-polish-UX-rules-WITH-CODE-0-Ground-rules-Exactly-t-1755202305378_1755202305378.txt:361:// server/routes/cart.ts
attached_assets/Pasted-Replit-implementation-brief-Fulfillment-UI-polish-UX-rules-WITH-CODE-0-Ground-rules-Exactly-t-1755202305378_1755202305378.txt:362:router.post("/api/cart/items", async (req, res) => {
attached_assets/Pasted-Replit-Work-Order-Fulfillment-Local-only-vs-Local-Shipping-UI-Rules-Live-Updates-0-Overvie-1755166345319_1755166345319.txt:117:In POST /api/cart/items:
audit/locality-offenders.rg.txt:6:attached_assets/Pasted-Replit-implementation-brief-Fulfillment-UI-polish-UX-rules-WITH-CODE-0-Ground-rules-Exactly-t-1755202305378_1755202305378.txt:114:POST /api/cart/items must reject when mode=LOCAL_ONLY && !isLocal(zip).
audit/locality-offenders.rg.txt:90:server/routes/cart.ts:68:    if (fulfillment_mode === 'LOCAL_ONLY' && !isLocal) {
audit/locality-offenders.rg.txt:91:server/routes/cart.ts:70:        code: 'LOCAL_ONLY_RESTRICTED',
audit/locality-offenders.rg.txt:105:attached_assets/Pasted-DO-EXACTLY-THIS-REPLIT-0-Fix-the-two-concrete-build-runtime-errors-shown-in-the-logs-A-Duplicate-1755152873624_1755152873624.txt:384:Try POST /api/cart/items with a Local-only product while non-local: receives 400 LOCAL_ONLY.
audit/locality-offenders.rg.txt:148:attached_assets/Pasted-Fix-Local-Only-Cart-Gating-Purge-Stale-Fulfillment-Locality-Code-Single-Source-of-Truth-What-I-m-1755203118734_1755203118735.txt:174:Server: /api/cart/items rejects non-eligible user on LOCAL_ONLY.
audit/locality-offenders.rg.txt:182:attached_assets/Pasted-Replit-implementation-brief-Fulfillment-UI-polish-UX-rules-WITH-CODE-0-Ground-rules-Exactly-t-1755202305378_1755202305378.txt:114:POST /api/cart/items must reject when mode=LOCAL_ONLY && !isLocal(zip).
attached_assets/Pasted-1-One-clean-fulfillment-chip-no-emojis-File-client-src-components-locality-ProductAvailabilityCh-1755153585218_1755153585219.txt:228:File: server/routes/cart.ts (inside add-to-cart handler)
attached_assets/Pasted-DO-EXACTLY-THIS-REPLIT-0-Fix-the-two-concrete-build-runtime-errors-shown-in-the-logs-A-Duplicate-1755152873624_1755152873624.txt:233:File: server/routes/cart.ts — inside the POST /api/cart/items handler, before creating the item, add:
attached_assets/Pasted-DO-EXACTLY-THIS-REPLIT-0-Fix-the-two-concrete-build-runtime-errors-shown-in-the-logs-A-Duplicate-1755152873624_1755152873624.txt:384:Try POST /api/cart/items with a Local-only product while non-local: receives 400 LOCAL_ONLY.
attached_assets/Pasted--do-everything-prove-it-prompt-you-can-give-Replit-to-verify-all-changes-end-to-end-It-s-task-d-1755127153251_1755127153251.txt:175:Return: 3 screenshots (product page remove → cart → checkout), plus Network capture showing DELETE /api/cart/items/:id → 200 and subsequent GET /api/cart.
client/src/hooks/useCart.ts:25:      apiJson("/api/cart/items", {
client/src/hooks/useCart.ts:102:      apiJson(`/api/cart/items/${itemId}`, { method: "DELETE" }),
client/src/hooks/useCart.ts:185:      apiJson(`/api/cart/items`, {
